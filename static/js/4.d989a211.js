(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{159:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),n("p",[t._v("在 Cloud Studio 中，我们将一个项目称之为一个「工作空间」，插件也是一个工作空间。要创建插件，我们需要进入 Cloud Studio "),n("a",{attrs:{href:"https://studio.dev.tencent.com/dashboard/workspace",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制台"),n("OutboundLink")],1),t._v("，点击「新建 Cloud Studio 插件」，进入插件创建页面。")]),t._v(" "),t._m(3),t._v(" "),n("p",[t._v("在插件创建页面，你需要填写一些插件的基本信息：插件名、仓库名、分类和描述。")]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),n("p",[t._v("创建完成之后，就会进入该插件的工作空间。插件工作空间默认是 Nodejs (8.12.0版本)的环境，同时预装了 yarn (1.12.1版本)。可以看到，在右侧功能区有一个「插件开发」面板，你就可以在这里进行插件的开发和实时调试了。")]),t._v(" "),t._m(6),t._v(" "),n("p",[t._v("一个典型的插件文件目录如下：")]),t._v(" "),t._m(7),t._m(8),t._v(" "),n("p",[t._v("一个最简单的插件入口文件可以是这样：")]),t._v(" "),t._m(9),t._v(" "),t._m(10),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),n("p",[t._v("这是你可以自定义的一个 React 组件，它可以被注入到 Cloud Studio 界面中，实现用户交互。")]),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),n("p",[t._v("在这个示例代码中，"),n("code",[t._v("HelloWorld")]),t._v(" 组件在插件装载时（"),n("code",[t._v("pluginWillMount")]),t._v("）我们调用 app 提供的 "),n("code",[t._v("inject")]),t._v("，将其注入到 Cloud Studio 界面中。其中 "),n("code",[t._v("position.STATUSBAR.WIDGET")]),t._v(" 表示这个组件将在界面的何处显示，完整的 API 及详细使用方法可以查看"),n("router-link",{attrs:{to:"/guide/interface.html"}},[t._v("界面注入")]),t._v("文档。")],1),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),n("p",[t._v("Cloud Studio 为插件开发提供了实时调试的功能，你可以在「插件开发」面板中查看当前状态。当你在开发插件时，需要先在终端安装依赖：")]),t._v(" "),t._m(26),n("p",[t._v("再启动实时调试模式：")]),t._v(" "),t._m(27),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),n("p",[t._v("如果你已经完成插件开发，想要将其发布到插件中心供所有用户安装，就可以前往 Cloud Studio "),n("a",{attrs:{href:"https://studio.dev.tencent.com/dashboard/workspace",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制台"),n("OutboundLink")],1),t._v("发布插件。")]),t._v(" "),n("p",[t._v("我们提供了两种插件发布方式——「预发布」和「正式发布」。「预发布」是指在你自己的所有工作空间开启该插件，无需审核，其他用户也不会再插件中心看到。你可以前往控制台"),n("a",{attrs:{href:"https://studio.dev.tencent.com/dashboard/plugin/mine",target:"_blank",rel:"noopener noreferrer"}},[t._v("我开发的插件"),n("OutboundLink")],1),t._v("页面中，点击设置进入插件设置页面，再选择「预发布」来预发布当前版本。")]),t._v(" "),n("p",[t._v("如果你的插件在所有工作空间中都能正常运行，可以将其正式发布到"),n("a",{attrs:{href:"https://studio.dev.tencent.com/plugins",target:"_blank",rel:"noopener noreferrer"}},[t._v("插件市场"),n("OutboundLink")],1),t._v("，供所有用户安装使用。前往控制台"),n("a",{attrs:{href:"https://studio.dev.tencent.com/dashboard/plugin/mine",target:"_blank",rel:"noopener noreferrer"}},[t._v("我开发的插件"),n("OutboundLink")],1),t._v("页面中，点击设置进入插件设置页面，再选择「正式发布」，填写插件的版本号就可以正式发布了。")]),t._v(" "),t._m(36),t._v(" "),n("p",[t._v("发布之后，我们会在后台审核你的插件，审核通过之后就可以在"),n("a",{attrs:{href:"https://studio.dev.tencent.com/plugins",target:"_blank",rel:"noopener noreferrer"}},[t._v("插件市场"),n("OutboundLink")],1),t._v("看到啦。")])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"概览"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概览","aria-hidden":"true"}},[this._v("#")]),this._v(" 概览")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Cloud Studio 是基于 Monaco Editor 以及 React 的在线 IDE（集成式开发环境）。它自带多种编程语言及运行环境支持，让开发者可以随时随地打开浏览器编写代码并运行代码。同时 Cloud Studio 开放了丰富的插件扩展系统，得益于 "),s("code",[this._v("Monaco Editor")]),this._v(" 强大的扩展性，用户可以自行开发插件来提升使用体验。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"创建一个插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建一个插件","aria-hidden":"true"}},[this._v("#")]),this._v(" 创建一个插件")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://dn-coding-net-production-pp.codehub.cn/6953a013-37b0-4894-a1be-2bbb4ae805e3.jpg",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("提示")]),this._v(" "),s("p",[this._v("创建插件的同时我们会为你同时创建一个腾讯云开发者平台项目，后续插件的发布依赖于该项目的代码，所以请不要随意删除该项目。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://dn-coding-net-production-pp.codehub.cn/49fb24e1-2bbd-453f-9105-a56e1693a1d2.jpg",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"文件结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文件结构","aria-hidden":"true"}},[this._v("#")]),this._v(" 文件结构")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v(".\n├── README.md   // 在这里编写插件文档\n├── cloudstudio.d.ts\n├── cloudstudio.png\n├── cloudstudio.svg\n├── config    // 自定义 webpack 配置\n│   ├── webpack.dev.config.js\n│   └── webpack.production.config.js\n├── index.html\n├── package.json\n├── src   // 源代码目录\n│   ├── index.ts\n├── tsconfig.json\n├── typings   // CloudStudio 依赖项的类型声明文件\n│   └── monaco.d.ts\n└── yarn.lock\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("其中 "),s("code",[this._v("src/index.tsx")]),this._v(" 是插件内置 webpack 的入口文件，在开发或发布时会被编译为可被浏览器执行的 Javascript。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"示例代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例代码","aria-hidden":"true"}},[this._v("#")]),this._v(" 示例代码")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Manager "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'webide-plugin-sdk/Manager'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" React "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'react'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" actions"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" PluginContext"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" appRegistry "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'cloudstudio'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" context "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("PluginContext")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// 插件唯一 key")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// 一定要确保代码中 pluginKey 的唯一性，推荐使用「开发者邮箱-昵称-插件名」的格式")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pluginKey "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'hello-widget'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" position"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" inject"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unregister "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" context"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("injectComponent"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("Hello")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("React"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token function-variable function"}},[t._v("handleClick")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        actions"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("notification")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" message"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Hello Cloud Studio!'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" notifyType"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'INFO'")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("render")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),n("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token keyword"}},[t._v("this")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleClick"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("sayHello"),n("span",{attrs:{class:"token operator"}},[t._v("<")]),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("MyManager")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("Manager")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("pluginWillMount")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token comment"}},[t._v("// 状态栏注入组件")]),t._v("\n        "),n("span",{attrs:{class:"token function"}},[t._v("inject")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            position"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token constant"}},[t._v("STATUSBAR")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token constant"}},[t._v("WIDGET")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                key"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" pluginKey"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            extension "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" React"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("createElement")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("extension"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{attrs:{class:"token function"}},[t._v("pluginWillUnmount")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token comment"}},[t._v("// 卸载组件")]),t._v("\n        "),n("span",{attrs:{class:"token function"}},[t._v("unregister")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" key"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" pluginKey"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" app"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Hello"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" position"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" position"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token constant"}},[t._v("STATUSBAR")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token constant"}},[t._v("WIDGET")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{attrs:{class:"token function"}},[t._v("appRegistry")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Manager"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" MyManager"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    key"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" pluginKey"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    app"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Hello"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("这段代码由四部分组成：一个 "),n("code",[t._v("PluginContext")]),t._v(" 的实例、一个名为 "),n("code",[t._v("HelloWorld")]),t._v(" 的 React 组件，一个 "),n("code",[t._v("MyPluginManager")]),t._v(" 类，以及最后的插件注册方法 "),n("code",[t._v("appRegistry")]),t._v("，他们的作用如下：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"plugincontext"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugincontext","aria-hidden":"true"}},[this._v("#")]),this._v(" "),s("strong",[this._v("PluginContext")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("PluginContext")]),this._v(" 负责初始化插件上下文，可以通过实例 "),s("code",[this._v("context")]),this._v(" 读取已定义的国际化模块，同时还可以注册插件的 UI 主题。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"helloworld"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#helloworld","aria-hidden":"true"}},[this._v("#")]),this._v(" "),s("strong",[this._v("HelloWorld")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"mypluginmanager"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mypluginmanager","aria-hidden":"true"}},[this._v("#")]),this._v(" "),s("strong",[this._v("MyPluginManager")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("MyPluginManager")]),this._v(" 继承自 "),s("code",[this._v("webide-plugin-sdk")]),this._v(" 模块中的 "),s("code",[this._v("Manager")]),this._v(" 基类，它负责管理插件的生命周期，你可以在里面处理插件的业务逻辑。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"appregistry"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#appregistry","aria-hidden":"true"}},[this._v("#")]),this._v(" "),s("strong",[this._v("appRegistry")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("最后我们需要通过 "),s("code",[this._v("appRegistry")]),this._v(" 来完成插件的注册")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("要注意区分"),s("strong",[this._v("插件")]),this._v("与"),s("strong",[this._v("组件")]),this._v("在 Cloud Studio 插件系统中的区别，插件是一个独立的 JavaScript 模块，它具有调用 Cloud Studio API 的能力。而组件是可以被注入到 Cloud Studio 的一个可交互界面，在需要时你可以通过插件的能力注入组件，但是对于一些插件来说，它们不需要交互界面，譬如编辑器主题、代码高亮以及代码片段等，因此也就不需要编写组件代码了。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"插件生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#插件生命周期","aria-hidden":"true"}},[this._v("#")]),this._v(" 插件生命周期")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("由于使用热加载的缘故，插件生命周期不同于发布安装后，例如 "),n("code",[t._v("pluginWillMount")]),t._v(" 在开发模式下会在插件被加载后执行一次，点击重载插件或热更新之后，会依次执行 "),n("code",[t._v("pluginWillUnmout")]),t._v(" 卸载并清除插件副作用，并再次执行 "),n("code",[t._v("pluginWillUnmount")]),t._v("。而在插件发布并安装到工作空间时，"),n("code",[t._v("pluginWillMount")]),t._v(" 会在所有已安装插件代码全部下载完毕后依次被执行。也就是说在开发模式下，插件生命周期的执行机制会导致出现一些意料之外的情况，例如注册编辑器的打开事件时，插件加载之前已经打开的编辑器并不会注册事件，这是已知的正常表现。未发布的插件在"),n("strong",[t._v("预发布")]),t._v("模式下才会和已安装的插件同时加载并执行生命周期方法。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("小贴士")]),this._v(" "),s("p",[this._v("你可以直接查看在模板项目中包含的 "),s("code",[this._v("codingide.d.ts")]),this._v(" 类型声明文件来查找 API 定义。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("提示")]),this._v(" "),s("p",[this._v("前文提到的 "),s("code",[this._v("webide-plugin-sdk")]),this._v(" 模块是插件系统的底层模块，它包含了插件启动、打包以及在开发阶段为插件提供 HMR（模块热替换）功能的 dev-server，请勿修改 package.json 中原有的 npm scripts 配置，否则可能导致插件无法正常工作。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("提示")]),this._v(" "),s("p",[this._v("一定要确保代码中 "),s("code",[this._v("pluginKey")]),this._v(" 的唯一性，Cloud Studio 插件系统根据这个 key 来区分插件。例如 A 插件与 B 插件的 key 相同，那么同时安装了两个插件以后，其中一个将会加载失败。所以 pluginKey 建议按照 "),s("code",[this._v("开发者邮箱-昵称-插件名")]),this._v(" 的格式来编写。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"实时调试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实时调试","aria-hidden":"true"}},[this._v("#")]),this._v(" 实时调试")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("yarn\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("yarn start\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("这将会在插件项目中启动一个简易的 "),n("code",[t._v("webpack-dev-server")]),t._v("。等待启动成功后，点击插件开发面板中的「加载插件」按钮，此时 Cloud Studio 将会连接之前启动的 "),n("code",[t._v("dev-server")]),t._v("，并开始提供 "),n("code",[t._v("远程 HMR")]),t._v(" 功能。随后当前开发的这个插件就会在工作空间内加载并启动。如同在传统编辑器中开发前端项目一样，每次修改源码并保存时，"),n("code",[t._v("dev-server")]),t._v(" 内置的 webpack 将会立即编译代码，编译完成后会将新的代码加载到当前工作空间，此时无需刷新浏览器即可查看插件的效果。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://dn-coding-net-production-pp.codehub.cn/92c81988-62b9-45aa-89a4-2663ea617ff0.gif",alt:"图片"}})])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"tip custom-block"},[n("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),n("p",[n("strong",[t._v("远程 HMR")]),t._v(" 无法有效的处理"),n("strong",[t._v("副作用")]),t._v("，例如当组件中通过原生 DOM API 绑定的一些事件，如果没有在组件卸载时解除绑定，热更新以后会重复绑定事件，又或者插件注册了快捷键、菜单、主题等对 Cloud Studio 界面或命令系统进行修改的行为，Cloud Studio 无法区分这些行为是来自于插件还是 Cloud Studio 自身，所以在热更新之后也会重复注册。要避免这种情况，需要在组件 "),n("code",[t._v("componentWillUnmount")]),t._v(" 或者插件 Manager 的 "),n("code",[t._v("pluginWillUnmount")]),t._v(" 生命周期中解绑这些事件及插件注册模块。Cloud Studio 插件系统的部分具有注册行为的 API 会返回相应的清除函数 "),n("code",[t._v("IDisposable")]),t._v("，组件或插件卸载时记得调用这些函数清除已经注册的模块。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("开发模式下默认开启了 webpack 的 "),s("code",[this._v("eval-sourcemap")]),this._v("，在插件源代码中添加断点，即可在浏览器开发者工具中看到编译前的源代码，方便调试。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://dn-coding-net-production-pp.codehub.cn/e1df384c-072c-448c-8c0b-c4f489e165b6.png",alt:"图片"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"推送到远端仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#推送到远端仓库","aria-hidden":"true"}},[this._v("#")]),this._v(" 推送到远端仓库")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果你的插件在实时调试时各项功能正常，就可以发布到插件市场了，不过在此之前，"),s("strong",[this._v("请一定要将你的代码 push 到远端仓库")]),this._v("。这是因为，当你发布插件的时候，我们会根据这个插件对应的仓库（一个腾讯云开发者平台项目）的最新代码来构建你的插件。删除该项目或代码未推送过来会导致构建失败或异常，影响您的发布。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"发布你的插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#发布你的插件","aria-hidden":"true"}},[this._v("#")]),this._v(" 发布你的插件")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),s("p",[this._v("请注意，预发布或发布之前你需要将代码推送到项目仓库中，我们会根据当前 master 分支最新的代码进行编译打包发布。")])])}],!1,null,null,null);e.options.__file="README.md";s.default=e.exports}}]);