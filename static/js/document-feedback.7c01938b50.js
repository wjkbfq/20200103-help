!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=24)}([function(e,t){e.exports=window.React},function(e,t,n){"use strict";var r=n(48);n.d(t,"a",function(){return r.a});var o=n(19);n.d(t,"b",function(){return o.a}),n.d(t,"g",function(){return o.b});var a=n(49);n.d(t,"c",function(){return a.a});var i=n(50);n.d(t,"d",function(){return i.a});var c=n(51);n.d(t,"e",function(){return c.a});var u=n(52);n.d(t,"f",function(){return u.a});var s=n(18);n.d(t,"h",function(){return s.a});var l=n(53);n.d(t,"i",function(){return l.a})},function(e,t,n){var r,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var i=n.apply(null,r);i&&e.push(i)}else if("object"===o)for(var c in r)a.call(r,c)&&r[c]&&e.push(c)}}return e.join(" ")}var a={}.hasOwnProperty;void 0!==e&&e.exports?(n.default=n,e.exports=n):(r=[],void 0!==(o=function(){return n}.apply(t,r))&&(e.exports=o))}()},function(e,t,n){e.exports=n(33)()},function(e,t){e.exports=window.ReactDOM},function(e,t,n){"use strict";var r=n(12);n.d(t,"a",function(){return r.a});var o=n(30);n.d(t,"b",function(){return o.a}),n.d(t,"c",function(){return o.b});var a=n(32);n.d(t,"d",function(){return a.a}),n.d(t,"e",function(){return a.b});var i=n(60);n.d(t,"f",function(){return i.a});n(72)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(37),a=r(o),i=n(15),c=r(i);e.exports={TransitionGroup:c.default,CSSTransitionGroup:a.default}},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a});var r="transition-",o=300,a=300},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return l});var i=n(11),c=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u({},e,{cursor:"crosshair"})))}return a(t,e),s(t,[{key:"onActived",value:function(){this.p1=null,this.p2=null}},{key:"onInput",value:function(e){var t=e.type,n=e.x,r=e.y,o=!1;switch(t){case"mousedown":this.p1=[n,r];break;case"mousemove":this.p2=[n,r];break;case"mouseup":o=!0}var a=this.generate();return o&&(this.p1=null,this.p2=null),{commit:o,drawing:a}}},{key:"generate",value:function(){var e=this.p1,t=this.p2,n=this.mode;if(!e||!t)return null;var r=c(e,2),o=r[0],a=r[1],i=c(t,2),u=i[0],s=i[1];return{type:n,param:[Math.min(o,u),Math.min(a,s),Math.abs(o-u),Math.abs(a-s),o,u,a,s]}}},{key:"onDeactivated",value:function(){return{commit:!1,drawing:null}}}]),t}(i.a)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function a(e){return new Promise(function(t,n){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){return t(r)},r.onerror=function(t){console.trace("loadImage() fail: "+e),n(t)},r.src=e})}function i(e){var t=e.api,n=e.info,r=e.options,o=n.base,a=n.content,i=n.width,c=n.height,u=n.scroll,s=o.split("//"),l=p(s,2),f=l[0],d=l[1],m=d.split("/").shift();return o=f+"//"+m,new Promise(function(e,n){var s=new XMLHttpRequest;s.open("POST",t),s.setRequestHeader("Content-Type","application/json"),s.responseType="blob",s.withCredentials=!0,s.onload=function(){if(200!=s.status)return void n();try{var t=s.response;e(URL.createObjectURL(t))}catch(e){n(e)}},s.onerror=n,s.send(JSON.stringify({base:o,content:a,width:i,height:c,scroll:u,options:r}))})}function c(){return{base:[location.protocol,location.host].join("//"),content:u(),windowWidth:$(window).width(),windowHeight:$(window).height(),documentWidth:$(document).width(),documentHeight:$(document).height(),scroll:l()}}function u(){var e=document.documentElement.outerHTML;return e=s(e,"iframe","script"),e=e.replace(/J-docDetailSide"\s*style="/,'J-docDetailSide" style="position:absolute;'),"<!DOCTYPE html>\n"+(e=e.replace(/J-sideScrollArea"\s*style="[^"]*"/,'J-sideScrollArea"'))}function s(e,t){for(var n=e.replace(new RegExp("<("+t+").+?</\\1>","ig"),'<div class="removed-'+t+'"></div>').replace(new RegExp("<("+t+")[^>]+?/>","ig"),'<div class="removed-${tag}"></div>'),r=arguments.length,o=Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return o&&o.length?s.apply(void 0,[n].concat(o)):n}function l(){var e={};!function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"d";if("object"===(void 0===t?"undefined":d(t))&&(n(t,r),t.childNodes&&t.childNodes.length))for(var o=0,a=t.childNodes.length;o<a;o++)e(t.childNodes[o],n,r+"/"+o)}(document,function(t,n){(t.scrollTop||t.scrollLeft)&&(e[n]=[t.scrollLeft,t.scrollTop])});var t=document.scrollingElement||document.body;return e.root=[t.scrollLeft,t.scrollTop],e}n.d(t,"e",function(){return m}),t.b=i,t.d=c,n.d(t,"c",function(){return h}),n.d(t,"a",function(){return v});var f=n(19),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=(function(){var e=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!/msie 10|edge|^((?!chrome|android).)*safari/i.test(navigator.userAgent)){e.next=4;break}return e.abrupt("return",new Promise(function(e,n){var r=new XMLHttpRequest;r.onload=function(){t=URL.createObjectURL(r.response)},r.open("GET",t,!0),r.responseType="blob",r.send()}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}))}(),function(){var e=o(regeneratorRuntime.mark(function e(t){var n,r,o,a,c,u,l,f,d,h,v,y,b,g,w,E,k,x=t.api,O=t.info,S=t.layers,T=t.options;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=i({api:x,info:O,options:T}),r=[n],S=S||[],o=0;o<S.length;o++)a=S[o],"content"==a.type&&(c=a.content,u=a.clip,l=a.base,f=a.scroll,d=p(u,4),h=d[0],v=d[1],y=d[2],b=d[3],g={base:l,content:s(c,"iframe","script"),width:y,height:b,scroll:f},r.push(a.task=i({api:x,info:g})));return e.next=6,Promise.all(r);case 6:if(w=e.sent,E=p(w,1),k=E[0],S&&S.length){e.next=11;break}return e.abrupt("return",k);case 11:return e.abrupt("return",m({baseImageUrl:k,layers:S}));case 12:case"end":return e.stop()}},e,this)}))}(),function(){var e=o(regeneratorRuntime.mark(function e(t){var n,o,i,c,u,s,l,d,p,m,h,v,y,b,g,w,E=t.baseImageUrl,k=t.layers;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.createElement("canvas"),o=n.getContext("2d"),e.next=4,a(E);case 4:i=e.sent,c=i.width,u=i.height,n.width=c,n.height=u,o.drawImage(i,0,0,c,u),s=!0,l=!1,d=void 0,e.prev=13,p=k[Symbol.iterator]();case 15:if(s=(m=p.next()).done){e.next=46;break}h=m.value,e.t0=h.type,e.next="content"===e.t0?20:"mask"===e.t0?30:"clip"===e.t0?35:"render"===e.t0?38:43;break;case 20:return e.t1=a,e.next=23,h.task;case 23:return e.t2=e.sent,e.next=26,(0,e.t1)(e.t2);case 26:return v=e.sent,y=h.clip,o.drawImage.apply(o,[v].concat(r(y))),e.abrupt("break",43);case 30:return o.save(),o.fillStyle=h.fill,h.clip?o.fillRect.apply(o,r(h.clip)):o.fillRect(0,0,c,u),o.restore(),e.abrupt("break",43);case 35:return b=h.clip,o.drawImage.apply(o,[i].concat(r(b),r(b))),e.abrupt("break",43);case 38:if(!h.render){e.next=43;break}return o.save(),e.next=42,h.render(o);case 42:o.restore();case 43:s=!0,e.next=15;break;case 46:e.next=52;break;case 48:e.prev=48,e.t3=e.catch(13),l=!0,d=e.t3;case 52:e.prev=52,e.prev=53,!s&&p.return&&p.return();case 55:if(e.prev=55,!l){e.next=58;break}throw d;case 58:return e.finish(55);case 59:return e.finish(52);case 60:return e.next=62,Object(f.b)(n);case 62:return g=e.sent,w=URL.createObjectURL(g),n.remove(),e.abrupt("return",w);case 66:case"end":return e.stop()}},e,this,[[13,48,52,60],[53,,55,59]])}));return function(t){return e.apply(this,arguments)}}()),h=(function(){var e=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.createElement("div"),document.body.appendChild(t),t.classList.add("screenshot-flashlight"),e.next=5,new Promise(function(e){return setTimeout(e,1)});case 5:return t.classList.add("on"),e.next=8,new Promise(function(e){return setTimeout(e,600)});case 8:document.body.removeChild(t);case 9:case"end":return e.stop()}},e,this)}))}(),function(){var e=o(regeneratorRuntime.mark(function e(t){var n,r,o,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.createElement("canvas"),r=n.getContext("2d"),e.next=4,a(t);case 4:return o=e.sent,i=o.width,c=o.height,n.width=i,n.height=c,r.drawImage(o,0,0,i,c),e.abrupt("return",n);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),v=8192},function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return a});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){var n=t.mode,o=t.name,a=t.cursor,i=t.className,c=t.supported,u=void 0===c||c,s=t.store;r(this,e),this.mode=n,this.name=o,this.cursor=a||"default",this.className=i,this.supported=u,this.store=s}return o(e,[{key:"onActived",value:function(){throw new Error("Tool.onActived() is abstract")}},{key:"onInput",value:function(){throw new Error("Tool.onInput() is abstact")}},{key:"onDeactived",value:function(){return{commit:!1,drawing:null}}},{key:"onRenderElement",value:function(){}}],[{key:"onRenderCanvas",value:function(){}}]),e}()},function(e,t,n){"use strict";var r=n(27);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}n.d(t,"b",function(){return T}),n.d(t,"d",function(){return C}),n.d(t,"c",function(){return _}),n.d(t,"a",function(){return j});var c,u,s=n(0),l=n.n(s),f=n(3),d=n.n(f),p=n(2),m=n.n(p),h=n(35),v=n(12),y=n(14),b=n(59),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(e){var t=e.className,n=e.style,r=e.children;return l.a.createElement("div",{className:m()("c-dialog",t),style:n},r)},k=function(e){var t=e.children;return l.a.createElement("div",{className:"c-dialog-hd"},t)},x=function(e){var t=e.className,n=e.children,r=i(e,["className","children"]);return l.a.createElement("div",w({className:m()("c-dialog-bd",t)},r),n)},O=function(e){var t=e.children;return l.a.createElement("div",{className:"c-dialog-ft"},t)},S=k,T=x,C=O,_=function(e){var t=e.submit,n=void 0!==t&&t,r=e.cancel,o=void 0!==r&&r,a=e.primary,c=void 0!==a&&a,u=e.children,s=i(e,["submit","cancel","primary","children"]),f=void 0;return f=n?"c-dialog-ft-btn c-dialog-ft-btn-sumbit":o?"c-dialog-ft-btn c-dialog-ft-btn-cancel":m()("c-btn",{"c-btn-hole":!c}),l.a.createElement(v.a,w({},s,{naked:!0,className:f}),u)},j=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),g(t,[{key:"render",value:function(){return null}},{key:"componentDidUpdate",value:function(){t._renderToManager(this.props)}},{key:"componentDidMount",value:function(){t._renderToManager(this.props)}},{key:"componentWillUnmount",value:function(){y.a.replace(null)}}],[{key:"_renderToManager",value:function(e){var t=e.children,n=i(e,["children"]);y.a.replace(l.a.createElement(N,n,t))}},{key:"show",value:function(e){y.a.hold(e)}},{key:"hide",value:function(){y.a.hold(null),y.a.replace(null)}},{key:"alert",value:function(e){var t=this;b.a.show(w({},e,{showCancel:!1,onConfirm:function(){return t.hide()}}))}},{key:"confirm",value:function(e){b.a.show(e)}}]),t}(s.Component);j.Head=S,j.Body=T,j.Footer=C,j.Button=_;var N=(u=c=function(e){function t(){var e,n,a,i;r(this,t);for(var c=arguments.length,u=Array(c),s=0;s<c;s++)u[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a._close=function(){"function"==typeof a.props.onClose&&a.props.onClose()},i=n,o(a,i)}return a(t,e),g(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,r=e.caption,o=e.disableCloseButton,a=e.children;return l.a.createElement(E,{className:t,style:n},l.a.createElement(k,null,r&&l.a.createElement("strong",{className:"c-dialog-hd-title"},r),!0!==o&&l.a.createElement(h.a,{className:"c-dialog-hd-close",title:"\u5173\u95ed",onClick:this._close},l.a.createElement("span",null,"\u5173\u95ed"))),a)}}]),t}(s.Component),c.propTypes={className:d.a.string,containerClassName:d.a.string,style:d.a.object,caption:d.a.node,onClose:d.a.func,disableCloseButton:d.a.bool,disableEscape:d.a.bool,maskClosable:d.a.bool},c.defaultProps={disableCloseButton:!1,disableEscape:!1,maskClosable:!0},u)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return v});var i=n(0),c=n.n(i),u=n(6),s=(n.n(u),n(18)),l=n(57),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m="object"===("undefined"==typeof window?"undefined":p(window)),h=void 0,v=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={holder:null,dialog:null,visible:!1},e.escape=function(){var t=e.state.dialog;if(t){var n=t.props,r=n.disableEscape,o=n.onClose;!r&&o&&o()}},e.replace=function(t){e.setState({dialog:t,visible:!!t})},e.hold=function(t){return e.setState({holder:t})},e.onModalClick=function(t){var n=document.querySelector("#dialog-root .c-dialog");!$.contains(n,t.target)&&e.handleMaskClick()},e.handleMaskClick=function(){var t=e.state.dialog;if(t){var n=t.props,r=n.maskClosable,o=n.onClose;r&&o&&o()}},!h&&m&&window.addEventListener("keydown",function(e){27===e.keyCode&&h&&h.escape()}),h=e,e}return a(t,e),d(t,null,[{key:"replace",value:function(e){m&&h&&h.replace(e)}},{key:"hold",value:function(e){m&&h&&h.hold(e)}}]),d(t,[{key:"render",value:function(){var e=this.state,t=e.visible,n=e.dialog,r=e.holder,o=n&&n.props&&n.props.containerClassName||"";return c.a.createElement("div",{id:"dialog-root"},c.a.createElement(u.CSSTransitionGroup,f({component:l.a},s.a.fade({visibleOpacity:.7})),t&&c.a.createElement("div",{key:"mask",className:"c-modal-mask",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#000",opacity:.6,zIndex:1010}})),c.a.createElement(u.CSSTransitionGroup,f({component:l.a},s.a.slide()),t&&c.a.createElement("div",{key:"container",className:"c-modal c-modal-visible "+o,style:{zIndex:1011},onClick:this.onModalClick},c.a.createElement("div",{className:"c-modal-inner",style:{verticalAlign:"middle",display:"table-cell"}},n))),r)}}]),t}(i.Component)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(38),s=r(u),l=n(0),f=r(l),d=n(3),p=r(d),m=n(39),h=(r(m),n(40)),v=(p.default.any,p.default.func,p.default.node,{component:"span",childFactory:function(e){return e}}),y=function(e){function t(n,r){o(this,t);var i=a(this,e.call(this,n,r));return i.performAppear=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(i._handleDoneAppearing.bind(i,e,t)):i._handleDoneAppearing(e,t)},i._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete i.currentlyTransitioningKeys[e];var n=(0,h.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e,t)},i.performEnter=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(i._handleDoneEntering.bind(i,e,t)):i._handleDoneEntering(e,t)},i._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete i.currentlyTransitioningKeys[e];var n=(0,h.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e,t)},i.performLeave=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(i._handleDoneLeaving.bind(i,e,t)):i._handleDoneLeaving(e,t)},i._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete i.currentlyTransitioningKeys[e];var n=(0,h.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)?i.keysToEnter.push(e):i.setState(function(t){var n=c({},t.children);return delete n[e],{children:n}})},i.childRefs=Object.create(null),i.state={children:(0,h.getChildMapping)(n.children)},i}return i(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,h.getChildMapping)(e.children),n=this.state.children;this.setState({children:(0,h.mergeChildMappings)(n,t)});for(var r in t){var o=n&&n.hasOwnProperty(r);!t[r]||o||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(var a in n){var i=t&&t.hasOwnProperty(a);!n[a]||i||this.currentlyTransitioningKeys[a]||this.keysToLeave.push(a)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach(function(t){return e.performEnter(t,e.childRefs[t])});var n=this.keysToLeave;this.keysToLeave=[],n.forEach(function(t){return e.performLeave(t,e.childRefs[t])})},t.prototype.render=function(){var e=this,t=[];for(var n in this.state.children)!function(n){var r=e.state.children[n];if(r){var o="string"!=typeof r.ref,a=e.props.childFactory(r),i=function(t){e.childRefs[n]=t};a===r&&o&&(i=(0,s.default)(r.ref,i)),t.push(f.default.cloneElement(a,{key:n,ref:i}))}}(n);var r=c({},this.props);return delete r.transitionLeave,delete r.transitionName,delete r.transitionAppear,delete r.transitionEnter,delete r.childFactory,delete r.transitionLeaveTimeout,delete r.transitionEnterTimeout,delete r.transitionAppearTimeout,delete r.component,f.default.createElement(this.props.component,r,t)},t}(f.default.Component);y.displayName="TransitionGroup",y.propTypes={},y.defaultProps=v,t.default=y,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}}t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=o;var a=n(0),i=(r(a),n(3)),c=r(i);t.nameShape=c.default.oneOfType([c.default.string,c.default.shape({enter:c.default.string,leave:c.default.string,active:c.default.string}),c.default.shape({enter:c.default.string,enterActive:c.default.string,leave:c.default.string,leaveActive:c.default.string,appear:c.default.string,appearActive:c.default.string})])},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(47),o=n(54),a=n(55),i=n(56),c={collapse:r.a,fade:o.a,scale:a.a,slide:i.a}},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}n.d(t,"a",function(){return i}),n.d(t,"b",function(){return c});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=[1,.98,.96,.94,.9,.8,.7,.5,.3,.1,.05],i=function(){var e=r(regeneratorRuntime.mark(function e(t){var n,r,o,i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1048576;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.slice(),r="image/png",o=1;case 2:return e.next=5,c(t,r,o);case 5:if(i=e.sent,!(i.size<u)){e.next=9;break}return e.abrupt("return",{type:r,blob:i,quality:o});case 9:if(0!==n.length){e.next=11;break}throw new Error("\u65e0\u6cd5\u538b\u7f29\u56fe\u7247\u5230\u5c11\u4e8e\u6307\u5b9a\u7684\u5927\u5c0f\uff1a"+u);case 11:r="image/jpeg",o=n.shift(),e.next=2;break;case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=r(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,o){t.toBlob(e,n,r)}));case 1:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}();"object"!==("undefined"==typeof window?"undefined":o(window))||HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var r=atob(this.toDataURL(t,n).split(",")[1]),o=r.length,a=new Uint8Array(o),i=0;i<o;i++)a[i]=r.charCodeAt(i);e(new Blob([a],{type:t||"image/png"}))}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return a});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,e),this.x=t,this.y=n}return o(e,null,[{key:"from",value:function(t,n){return new e(n.x-t.x,n.y-t.y)}}]),o(e,[{key:Symbol.iterator,value:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}},e,this)})},{key:"square",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.square())}},{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"minus",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"project",value:function(e){return e.multipy(this.dot(e)/e.square())}},{key:"multipy",value:function(t){return new e(this.x*t,this.y*t)}},{key:"normalize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.multipy(e/this.length())}},{key:"rotate",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"deg",r="deg"==n?t*Math.PI/180:t,o=Math.sin(r),a=Math.cos(r),i=a,c=o,u=-o,s=a,l=this.x,f=this.y;return new e(i*l+u*f+0,c*l+s*f+0)}},{key:"vertical",value:function(){return new e(this.y,-this.x)}},{key:"reverse",value:function(){return this.multipy(-1)}},{key:"getAngle",value:function(){var e=this.length();if(0===e)return 0;var t=Math.acos(this.x/e);return 180*(this.y>0?1:-1)*t/Math.PI}}]),e}()},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return g});var c=n(73),u=n.n(c),s=n(0),l=n.n(s),f=n(5),d=n(9),p=n(1),m=n(22),h=n.n(m),v=n(9),y=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function(e){function t(){var e,n,i,c,u=this;o(this,t);for(var s=arguments.length,l=Array(s),m=0;m<s;m++)l[m]=arguments[m];return n=i=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.thumbnail=[],i.state={url:"",ready:!1,loading:!1,scrollRadio:null,drawingsList:i.props.drawingsList||[]},i.cancelableTasks=Object(p.a)(),i.capture=r(regeneratorRuntime.mark(function e(){var t,n,r,o,a,c,s,l,p,m,h,y,b,g,w,E,k,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.props,n=t.info,r=t.onChange,o=t.fullPage,a=i.state.drawingsList,i.setState({loading:!0}),n||(n=Object(d.d)()),c=void 0,s=[],l=1,p=n,m=p.base,h=p.content,y=p.scroll,b=p.documentHeight,g=p.windowWidth,o&&(l=Math.ceil(b/v.a)),w=[],e.prev=9,E=function(e){var t=void 0;if(o)if(e<l-1)t=v.a;else{var r=e*v.a/100;t=Math.round(Math.min(v.a,b-e*v.a+r))}else t=n.windowHeight;w.push(i.cancelableTasks.run(function(){return Object(d.b)({api:"//cloud.tencent.com/tool/screenshot?action=capture",info:{base:m,content:h,scroll:o?null:y,width:g,height:t},options:{fullPage:!1,clip:o?{x:0,y:v.a*e,width:g,height:t}:null}})}))},k=0;k<l;k++)E(k);return e.next=14,Promise.all(w);case 14:return c=e.sent,x=[],c.forEach(function(e,t){var n=a[t];n&&n.length?x.push(Object(d.e)({baseImageUrl:e,layers:[{type:"render",render:function(e){f.f.drawToCanvasContext(e,n)}}]})):x.push(Promise.resolve(e))}),e.next=19,Promise.all(x);case 19:s=e.sent,e.next=27;break;case 22:return e.prev=22,e.t0=e.catch(9),console.error(e.t0),i.setState({loading:!1,ready:!1,error:!0}),e.abrupt("return");case 27:i.setState({rawUrls:c,destUrls:s,ready:!0,loading:!1},function(){r&&r(s,{dirty:a&&_.some(a,function(e){return e&&e.length})})}),o||setTimeout(function(){i.scrollViewportIntoView()});case 29:case"end":return e.stop()}},e,u,[[9,22]])})),i.markup=r(regeneratorRuntime.mark(function e(){var t,n,r,o,a,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=i.state,n=t.rawUrls,r=t.drawingsList,o=t.scrollRadio,a=i.props.onChange,c="screenshot-guide",s=h.a.get(c),f.f.edit({imageUrls:n,imageScrollRatio:o,imageDrawingsList:r,displayGuide:!s,onFinish:function(e){var t=e.urls,r=e.drawingsList,o=i.state.destUrls;i.setState({destUrls:t,drawingsList:r},function(){o.forEach(function(e,r){t[r]!==e&&n[r]!==e&&URL.revokeObjectURL(e)});var e=[],i=!1;r.forEach(function(n,r){n&&n.length&&(i=!0,e.push(t[r]))}),a&&a(e,{dirty:i})})}}),h.a.set(c,1,{expires:90});case 6:case"end":return e.stop()}},e,u)})),c=n,a(i,c)}return i(t,e),b(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.destUrls,r=t.drawingsList,o=t.loading,a=t.error,i=t.ready,c=this.props.style;return l.a.createElement("div",{className:"screenshot-wrap",style:c},o&&l.a.createElement("div",{className:"screenshot-tip loading"},l.a.createElement("i",{className:"shot-loading-icon"}),l.a.createElement("p",{className:"shot-loading-text"},"\u6b63\u5728\u5904\u7406\u6587\u7ae0\u622a\u56fe")),a&&l.a.createElement("div",{className:"screenshot-tip loading"},l.a.createElement("p",{className:"shot-loading-text",style:{marginTop:0}},"\u622a\u56fe\u5931\u8d25")),i&&l.a.createElement(s.Fragment,null,l.a.createElement("div",{ref:function(t){return e.container=t},style:{width:"100%",height:"100%",overflow:"hidden"}},n.map(function(t,n){return l.a.createElement("img",{key:n,ref:function(t){return e.thumbnail[n]=t},src:t,width:"100%"})})),l.a.createElement("div",{className:"screenshot-mask",onClick:this.markup,hotrep:"document.feedback.screenshot.edit"},l.a.createElement("div",{className:"screenshot-tip edit"},l.a.createElement("i",{className:"shot-edit-icon"}),l.a.createElement("p",{className:"shot-edit-text"},r&&_.some(r,function(e){return e&&e.length})?"\u5185\u5bb9\u6807\u8bb0\u6210\u529f":"\u70b9\u51fb\u6807\u8bb0\u5185\u5bb9")))))}},{key:"componentDidMount",value:function(){this.props.autoCapture&&this.capture()}},{key:"componentWillUnmount",value:function(){var e=this.state,t=e.rawUrl,n=e.destUrl;t&&URL.revokeObjectURL(t),n&&URL.revokeObjectURL(n),this.cancelableTasks.cancelAll()}},{key:"scrollViewportIntoView",value:function(){var e=this.props.info;if(e){var t=y(e.scroll.root,2),n=(t[0],t[1]),r=n/this.getDocumentHeight();if(this.container&&this.thumbnail.length){var o=this.thumbnail.reduce(function(e,t){return u()(e).height()+u()(t).height()},0),a=o*r;this.container.scrollTop=a}this.setState({scrollRadio:r})}}},{key:"getDocumentHeight",value:function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}}]),t}(l.a.Component)},function(e,t,n){var r,o;"function"==typeof Symbol&&Symbol.iterator;!function(a){r=a,void 0!==(o="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o)}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(n){function r(t,o,a){var i;if("undefined"!=typeof document){if(arguments.length>1){if(a=e({path:"/"},r.defaults,a),"number"==typeof a.expires){var c=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*a.expires),a.expires=c}try{i=JSON.stringify(o),/^[\{\[]/.test(i)&&(o=i)}catch(e){}return o=n.write?n.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",o,a.expires&&"; expires="+a.expires.toUTCString(),a.path&&"; path="+a.path,a.domain&&"; domain="+a.domain,a.secure?"; secure":""].join("")}t||(i={});for(var u=document.cookie?document.cookie.split("; "):[],s=/(%[0-9A-Z]{2})+/g,l=0;l<u.length;l++){var f=u[l].split("="),d=f.slice(1).join("=");'"'===d.charAt(0)&&(d=d.slice(1,-1));try{var p=f[0].replace(s,decodeURIComponent);if(d=n.read?n.read(d,p):n(d,p)||d.replace(s,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(e){}if(t===p){i=d;break}t||(i[p]=d)}catch(e){}}return i}}return r.set=r,r.get=function(e){return r(e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}return t(function(){})})},function(e,t,n){"use strict";var r=n(74);n.d(t,"a",function(){return r.a})},function(e,t,n){e.exports=n(25)},function(e,t,n){"use strict";function r(){if(!m){var e=document.createElement("div");return e.id="doc-feedback-dialog-root",document.body.appendChild(e),l.a.render(u.a.createElement(f.e,null),e),m=!0,!0}}function o(e){var t=e.dom,n=e.screenshot,r=e.onSubmitUseful,o=e.onSubmitSuggest;l.a.render(u.a.createElement(p.a,{screenshot:n,onSubmitUseful:r,onSubmitSuggest:o}),t)}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.screenshot,n=e.selection,r=e.onSubmitSuggest;f.d.show(u.a.createElement(d.a,{screenshot:t,selection:n,onSubmit:r}))}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"DocFeedback",function(){return h});var i=n(26),c=(n.n(i),n(0)),u=n.n(c),s=n(4),l=n.n(s),f=n(5),d=n(23),p=n(75),m=!1,h=window.DocFeedback={setup:r,start:a,render:o}},function(e,t){!function(e){e.forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype])},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return m});var c=n(0),u=n.n(c),s=n(2),l=n.n(s),f=n(28),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),p(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.naked,o=void 0!==n&&n,a=e.loading,i=void 0!==a&&a,c=e.tinyLoading,s=void 0!==c&&c,p=e.disabled,m=void 0!==p&&p,h=e.small,v=void 0!==h&&h,y=e.weak,b=void 0!==y&&y,g=e.hole,w=void 0!==g&&g,E=e.onClick,k=void 0===E?null:E,x=e.children,O=r(e,["className","naked","loading","tinyLoading","disabled","small","weak","hole","onClick","children"]),S=l()(t,{"c-btn":!o,"c-btn-small":v,"c-btn-weak":b,"c-btn-hole":w,"c-btn-disabled":m,loading:i});return u.a.createElement("button",d({className:S,disabled:m,onClick:k},O),i?u.a.createElement(f.a,{className:b?"":"c-loading-weak",tiny:s}):x)}}]),t}(c.Component)},function(e,t,n){"use strict";var r=n(29);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";function r(e){var t=e.medium,n=void 0!==t&&t,r=e.small,o=void 0!==r&&r,i=e.tiny,u=void 0!==i&&i,s=e.className,l=e.style;return a.a.createElement("div",{className:c()("c-loading",{"c-loading-tip":n,"c-loading-tip m":o,m:u},s),style:l},a.a.createElement("div",{className:"c-loading-inner"},a.a.createElement("div",{className:"one"}),a.a.createElement("div",{className:"two"}),a.a.createElement("div",{className:"three"})))}t.a=r;var o=n(0),a=n.n(o),i=n(2),c=n.n(i)},function(e,t,n){"use strict";var r=n(31);n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return r.b})},function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return i});var r=n(0),o=n.n(r),a=function(e){var t=e.options,n=e.value,a=e.onChange;return o.a.createElement(r.Fragment,null,t.map(function(e){return o.a.createElement(i,{key:e.value,checked:-1!=n.indexOf(e.value),hotrep:e.hotrep,onChange:function(r){var o=r?n.concat(e.value):n.filter(function(t){return t!=e.value}),i=t.filter(function(e){return-1!=o.indexOf(e.value)}).map(function(e){return e.value});a&&a(i)}},e.label)}))},i=function(e){var t=e.checked,n=e.disabled,r=e.hotrep,a=e.children,i=e.onChange;return o.a.createElement("label",{className:"c-form-ctrl-label"},o.a.createElement("input",{disabled:n,type:"checkbox",className:"c-checkbox",checked:t,onChange:function(e){return i(e.target.checked)},hotrep:r}),o.a.createElement("span",{className:"c-form-ctrl-txt"},a))}},function(e,t,n){"use strict";var r=n(13);n.d(t,"a",function(){return r.a});var o=n(14);n.d(t,"b",function(){return o.a})},function(e,t,n){"use strict";function r(){}var o=n(34);e.exports=function(){function e(e,t,n,r,a,i){if(i!==o){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r=n(36);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){var t=e.to,n=e.children,o=r(e,["to","children"]),a=t||"javascript:;";return i.a.createElement("a",c({href:a},o),n)}t.a=o;var a=n(0),i=n.n(a),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(0),s=r(u),l=n(3),f=r(l),d=n(15),p=r(d),m=n(41),h=r(m),v=n(17),y=(v.nameShape.isRequired,f.default.bool,f.default.bool,f.default.bool,(0,v.transitionTimeout)("Appear"),(0,v.transitionTimeout)("Enter"),(0,v.transitionTimeout)("Leave"),{transitionAppear:!1,transitionEnter:!0,transitionLeave:!0}),b=function(e){function t(){var n,r,i;o(this,t);for(var c=arguments.length,u=Array(c),l=0;l<c;l++)u[l]=arguments[l];return n=r=a(this,e.call.apply(e,[this].concat(u))),r._wrapChild=function(e){return s.default.createElement(h.default,{name:r.props.transitionName,appear:r.props.transitionAppear,enter:r.props.transitionEnter,leave:r.props.transitionLeave,appearTimeout:r.props.transitionAppearTimeout,enterTimeout:r.props.transitionEnterTimeout,leaveTimeout:r.props.transitionLeaveTimeout},e)},i=n,a(r,i)}return i(t,e),t.prototype.render=function(){return s.default.createElement(p.default,c({},this.props,{childFactory:this._wrapChild}))},t}(s.default.Component);b.displayName="CSSTransitionGroup",b.propTypes={},b.defaultProps=y,t.default=b,e.exports=t.default},function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter(function(e){return null!=e}),0!==t.length)return 1===t.length?t[0]:t.reduce(function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}})}},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";function r(e){if(!e)return e;var t={};return a.Children.map(e,function(e){return e}).forEach(function(e){t[e.key]=e}),t}function o(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},o=[];for(var a in e)t.hasOwnProperty(a)?o.length&&(r[a]=o,o=[]):o.push(a);var i=void 0,c={};for(var u in t){if(r.hasOwnProperty(u))for(i=0;i<r[u].length;i++){var s=r[u][i];c[r[u][i]]=n(s)}c[u]=n(u)}for(i=0;i<o.length;i++)c[o[i]]=n(o[i]);return c}t.__esModule=!0,t.getChildMapping=r,t.mergeChildMappings=o;var a=n(0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){return k.length?k.forEach(function(n){return e.addEventListener(n,t,!1)}):setTimeout(t,0),function(){k.length&&k.forEach(function(n){return e.removeEventListener(n,t,!1)})}}t.__esModule=!0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(42),l=r(s),f=n(44),d=r(f),p=n(45),m=r(p),h=n(46),v=n(0),y=r(v),b=n(3),g=r(b),w=n(4),E=n(17),k=[];h.transitionEnd&&k.push(h.transitionEnd),h.animationEnd&&k.push(h.animationEnd);var x=(g.default.node,E.nameShape.isRequired,g.default.bool,g.default.bool,g.default.bool,g.default.number,g.default.number,g.default.number,function(e){function t(){var n,r,i;o(this,t);for(var c=arguments.length,u=Array(c),s=0;s<c;s++)u[s]=arguments[s];return n=r=a(this,e.call.apply(e,[this].concat(u))),r.componentWillAppear=function(e){r.props.appear?r.transition("appear",e,r.props.appearTimeout):e()},r.componentWillEnter=function(e){r.props.enter?r.transition("enter",e,r.props.enterTimeout):e()},r.componentWillLeave=function(e){r.props.leave?r.transition("leave",e,r.props.leaveTimeout):e()},i=n,a(r,i)}return i(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var r=(0,w.findDOMNode)(this);if(!r)return void(t&&t());var o=this.props.name[e]||this.props.name+"-"+e,a=this.props.name[e+"Active"]||o+"-active",i=null,u=void 0;(0,l.default)(r,o),this.queueClassAndNode(a,r);var s=function(e){e&&e.target!==r||(clearTimeout(i),u&&u(),(0,d.default)(r,o),(0,d.default)(r,a),u&&u(),t&&t())};n?(i=setTimeout(s,n),this.transitionTimeouts.push(i)):h.transitionEnd&&(u=c(r,s))},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,m.default)(function(){return n.flushClassNameAndNodeQueue()}))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach(function(e){e.node.scrollTop,(0,l.default)(e.node,e.className)}),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=u({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,y.default.cloneElement(y.default.Children.only(this.props.children),e)},t}(y.default.Component));x.displayName="CSSTransitionGroupChild",x.propTypes={},t.default=x,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){e.classList?e.classList.add(t):(0,a.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}var o=n(10);t.__esModule=!0,t.default=r;var a=o(n(43));e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}t.__esModule=!0,t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}},function(e,t,n){"use strict";function r(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-f)),r=setTimeout(e,n);return f=t,r}var o=n(10);t.__esModule=!0,t.default=void 0;var a,i=o(n(16)),c=["","webkit","moz","o","ms"],u="clearTimeout",s=r,l=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};i.default&&c.some(function(e){var t=l(e,"request");if(t in window)return u=l(e,"cancel"),s=function(e){return window[t](e)}});var f=(new Date).getTime();a=function(e){return s(e)},a.cancel=function(e){window[u]&&"function"==typeof window[u]&&window[u](e)};var d=a;t.default=d,e.exports=t.default},function(e,t,n){"use strict";var r=n(10);t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var o=r(n(16)),a="transform";t.transform=a;var i,c,u;t.animationEnd=u,t.transitionEnd=c;var s,l,f,d;t.transitionDelay=d,t.transitionTiming=f,t.transitionDuration=l,t.transitionProperty=s;var p,m,h,v;if(t.animationDelay=v,t.animationTiming=h,t.animationDuration=m,t.animationName=p,o.default){var y=function(){for(var e,t,n=document.createElement("div").style,r={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},o=Object.keys(r),a="",i=0;i<o.length;i++){var c=o[i];if(c+"TransitionProperty"in n){a="-"+c.toLowerCase(),e=r[c]("TransitionEnd"),t=r[c]("AnimationEnd");break}}return!e&&"transitionProperty"in n&&(e="transitionend"),!t&&"animationName"in n&&(t="animationend"),n=null,{animationEnd:t,transitionEnd:e,prefix:a}}();i=y.prefix,t.transitionEnd=c=y.transitionEnd,t.animationEnd=u=y.animationEnd,t.transform=a=i+"-"+a,t.transitionProperty=s=i+"-transition-property",t.transitionDuration=l=i+"-transition-duration",t.transitionDelay=d=i+"-transition-delay",t.transitionTiming=f=i+"-transition-timing-function",t.animationName=p=i+"-animation-name",t.animationDuration=m=i+"-animation-duration",t.animationTiming=h=i+"-animation-delay",t.animationDelay=v=i+"-animation-timing-function"}var b={transform:a,end:c,property:s,timing:f,delay:d,duration:l};t.default=b},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.targetHeight,n=e.enterTimeout,r=void 0===n?a.a:n,u=e.leaveTimeout,s=void 0===u?a.b:u,l=a.c+"collapse",f=Object(o.c)({name:l,targetHeight:t,enterTimeout:r,leaveTimeout:s});if(!c[f]){var d=c[f]={transitionName:l+f,transitionEnterTimeout:r,transitionLeaveTimeout:s},p=i(d,t);Object(o.e)(l+f,p)}return c[f]}t.a=r;var o=n(1),a=n(7),i=function(e,t){return"\n."+e.transitionName+"-enter {\n\tmax-height: 0;\n}\n."+e.transitionName+"-enter-active {\n\tmax-height: "+t+"px;\n\ttransition: max-height "+e.transitionEnterTimeout+"ms ease;\n}\n."+e.transitionName+"-leave {\n\tmax-height: "+t+"px;\n}\n."+e.transitionName+"-leave-active {\n\tmax-height: 0;\n\ttransition: max-height "+e.transitionLeaveTimeout+"ms ease;\n}\n"},c={}},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function o(){var e=this,t=0,n=[],o=function(o){var a=!1,i=t++,c=function(){var e=n.findIndex(function(e){return e.id===i});e>-1&&n.splice(e,1)},u=function(){return new Promise(function(){var t=r(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(o()).then(function(e){return a?null:(n(e),c())},function(e){return a?null:(r(e),c())}));case 1:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}())},s=function(){a=!0,c()},l={id:i,run:u,cancel:s};return n.push(l),l},a=function(){for(;n.length;)n.pop().cancel()};return{create:o,run:function(e){return o(e).run()},cancelAll:a}}t.a=o},function(e,t,n){"use strict";function r(e){if(e.prototype)throw new RangeError("Can only hash a plain object");return Object(o.d)(JSON.stringify(e))}t.a=r;var o=n(1)},function(e,t,n){"use strict";function r(e){var t=0,n=void 0,r=void 0,o=void 0;if(0===e.length)return t;for(n=0,o=e.length;n<o;n++)r=e.charCodeAt(n),t=(t<<5)-t+r,t|=0;return t}t.a=r},function(e,t,n){"use strict";function r(e,t){if("undefined"!=typeof document){var n=document.getElementById(o+e);return n||(n=document.createElement("style"),n.id=o+e,document.querySelector("head").appendChild(n)),n.textContent!=t&&(n.textContent=t),n}}t.a=r;var o="dynamic-inserted-css-"},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){var e=navigator.userAgent.toLowerCase();return!["android","iphone","windows phone","ipad"].every(function(t){return-1==e.indexOf(t)})}},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function o(e,t,n){return new Promise(function(r,o){var a=new XMLHttpRequest;a.withCredentials=!0,a.onreadystatechange=function(){if(a.readyState===a.DONE)try{var e=JSON.parse(a.responseText);0!==e.code&&o(new Error(e.msg)),r(e.data)}catch(e){e instanceof SyntaxError&&(e.message="\u670d\u52a1\u5668\u54cd\u5e94\u683c\u5f0f\u9519\u8bef"),o(e)}},n&&(a.upload.onprogress=function(e){e.lengthComputable&&e.total&&n(e.loaded,e.total)}),a.onerror=o,a.open("POST",e),a.send(t)})}function a(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"file",a=arguments[4],i=new FormData;return i.append(r,t,n),i.append("filename",n),o(e,i,a)}t.a=a;!function(){var e=r(regeneratorRuntime.mark(function e(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"file",i=arguments[3];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new FormData,r.append(a,n,n.name),r.append("filename",n.name),e.abrupt("return",o(t,r,i));case 4:case"end":return e.stop()}},e,this)}))}()},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.visibleOpacity,n=void 0===t?1:t,r=e.enterTimeout,u=void 0===r?a.a:r,s=e.leaveTimeout,l=void 0===s?a.b:s,f=a.c+"fade",d=Object(o.c)({name:f,visibleOpacity:n,enterTimeout:u,leaveTimeout:l});if(!c[d]){var p=c[d]={transitionName:f+d,transitionEnterTimeout:u,transitionLeaveTimeout:l+1e-4},m=i(p,n);Object(o.e)(f+d,m)}return c[d]}t.a=r;var o=n(1),a=n(7),i=function(e,t){return"\n."+e.transitionName+"-enter {\n\topacity: 0 !important;\n}\n."+e.transitionName+"-enter-active {\n\topacity: "+t+" !important;\n\ttransition: opacity "+e.transitionEnterTimeout+"ms ease;\n}\n."+e.transitionName+"-leave {\n\topacity: "+t+" !important;\n}\n."+e.transitionName+"-leave-active {\n\topacity: 0 !important;\n\ttransition: opacity "+e.transitionLeaveTimeout+"ms ease;\n}\n"},c={}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enterScale,n=void 0===t?{sx:.1,sy:.1}:t,r=e.leaveScale,u=void 0===r?n:r,s=e.enterTimeout,l=void 0===s?a.a:s,f=e.leaveTimeout,d=void 0===f?a.b:f,p=a.c+"scale",m=Object(o.c)({name:p,enterScale:n,leaveScale:u,enterTimeout:l,leaveTimeout:d});if(!c[m]){var h=c[m]={transitionName:p+m,transitionEnterTimeout:l,transitionLeaveTimeout:d},v=i(h,n,u);Object(o.e)(p+m,v)}return c[m]}t.a=r;var o=n(1),a=n(7),i=function(e,t,n){return"\n."+e.transitionName+"-enter {\n\topacity: 0 !important;\n\ttransform: scale3d("+t.sx+", "+t.sy+", 1);\n}\n."+e.transitionName+"-enter-active {\n\topacity: 1 !important;\n\ttransform: scale3d(1, 1, 1);\n\ttransition: opacity "+e.transitionEnterTimeout+"ms ease, transform "+e.transitionEnterTimeout+"ms ease;\n}\n."+e.transitionName+"-leave {\n\topacity: 1 !important;\n\ttransform: scale3d(1, 1, 1);\n}\n."+e.transitionName+"-leave-active {\n\topacity: 0 !important;\n\ttransform: scale3d("+n.sx+", "+n.sy+", 1);\n\ttransition: opacity "+e.transitionLeaveTimeout+"ms ease, transform "+e.transitionLeaveTimeout+"ms ease;\n}\n"},c={}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enterPosition,n=void 0===t?{x:0,y:-30}:t,r=e.leavePosition,u=void 0===r?n:r,s=e.enterTimeout,l=void 0===s?a.a:s,f=e.leaveTimeout,d=void 0===f?a.b:f,p=a.c+"slide",m=Object(o.c)({name:p,enterPosition:n,leavePosition:u,enterTimeout:l,leaveTimeout:d});if(!c[m]){var h=c[m]={transitionName:p+m,transitionEnterTimeout:l,transitionLeaveTimeout:d},v=i(h,n,u);Object(o.e)(p+m,v)}return c[m]}t.a=r;var o=n(1),a=n(7),i=function(e,t,n){return"\n."+e.transitionName+"-enter {\n\topacity: 0 !important;\n\ttransform: translate3d("+t.x+"px, "+t.y+"px, 0);\n}\n."+e.transitionName+"-enter-active {\n\topacity: 1 !important;\n\ttransform: translate3d(0, 0, 0);\n\ttransition: opacity "+e.transitionEnterTimeout+"ms ease, transform "+e.transitionEnterTimeout+"ms ease;\n}\n."+e.transitionName+"-leave {\n\topacity: 1 !important;\n\ttransform: translate3d(0, 0, 0);\n}\n."+e.transitionName+"-leave-active {\n\topacity: 0 !important;\n\ttransform: translate3d("+n.x+"px, "+n.y+"px, 0);\n\ttransition: opacity "+e.transitionLeaveTimeout+"ms ease, transform "+e.transitionLeaveTimeout+"ms ease;\n}\n"},c={}},function(e,t,n){"use strict";var r=n(58);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";function r(e){return a.a.Children.toArray(e.children)[0]||null}t.a=r;var o=n(0),a=n.n(o)},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return b});var u,s,l=n(0),f=n.n(l),d=n(3),p=n.n(d),m=n(13),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},b=(s=u=function(e){function t(){var e,n,r,o;a(this,t);for(var c=arguments.length,u=Array(c),s=0;s<c;s++)u[s]=arguments[s];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={disabled:!1,loading:!1,error:null},r.toggleDisabled=function(e){return r.setState({disabled:e})},r.showLoading=function(){return r.setState({loading:!0})},r.hideLoading=function(){return r.setState({loading:!1})},r.showError=function(e){return r.setState({error:e})},r.hideError=function(){return r.setState({error:null})},o=n,i(r,o)}return c(t,e),v(t,[{key:"setState",value:function(){if(!this.isUnmounted){for(var e,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setState",this)).call.apply(e,[this].concat(r))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,a=t.content,i=t.showClose,c=t.showCancel,u=t.confirmText,s=t.cancelText,l=t.onConfirm,d=t.onCancel,p=t.success,v=t.warning,y=o(t,["title","content","showClose","showCancel","confirmText","cancelText","onConfirm","onCancel","success","warning"]),b=this.state,g=b.disabled,w=b.loading,E=b.error,k=function(){var t=r(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=l({toggleDisabled:e.toggleDisabled,showLoading:e.showLoading,hideLoading:e.hideLoading,showError:e.showError,hideError:e.hideError}))||!n.then){t.next=15;break}return t.prev=2,e.showLoading(),e.hideError(),t.next=7,n;case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),e.showError(t.t0);case 12:return t.prev=12,e.hideLoading(),t.finish(12);case 15:case"end":return t.stop()}},t,e,[[2,9,12,15]])}));return function(){return t.apply(this,arguments)}}(),x=function(){return d()};return f.a.createElement(m.a,h({},y,{caption:!1,disableCloseButton:!i,onClose:x}),f.a.createElement(m.b,null,f.a.createElement("div",{className:"d-confirm-dialog-box"},f.a.createElement("div",{className:"d-confirm-dialog-icon"},p&&f.a.createElement("i",{className:"icon-dialog-success"}),v&&f.a.createElement("i",{className:"icon-dialog-error"})),f.a.createElement("div",{className:"d-confirm-dialog-con"},f.a.createElement("div",{className:"d-confirm-dialog-tit"},n),f.a.createElement("div",{className:"d-confirm-dialog-txt"},a)))),f.a.createElement(m.d,null,f.a.createElement(m.c,{primary:!0,disabled:g||w,loading:w,onClick:k},u),c&&f.a.createElement(m.c,{onClick:x},s),E&&f.a.createElement("p",{className:"c-dialog-ft-validate"},E.msg||E.message)))}},{key:"componentWillUnmount",value:function(){this.isUnmounted=!0}}],[{key:"show",value:function(e){m.a.show(f.a.createElement(t,e))}},{key:"hide",value:function(){m.a.hide()}}]),t}(l.Component),u.propTypes={title:p.a.string,content:p.a.node.isRequired,showClose:p.a.bool.isRequired,showCancel:p.a.bool.isRequired,confirmText:p.a.string.isRequired,cancelText:p.a.string.isRequired,onConfirm:p.a.func.isRequired,onCancel:p.a.func.isRequired,success:p.a.bool,warning:p.a.bool},u.defaultProps={title:"\u6e29\u99a8\u63d0\u793a",showClose:!0,showCancel:!0,confirmText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onCancel:function(){return m.a.hide()},success:!1,warning:!1},s)},function(e,t,n){"use strict";var r=n(61);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return T});var s=n(62),l=(n.n(s),n(0)),f=n.n(l),d=n(4),p=n.n(d),m=n(6),h=(n.n(m),n(1)),v=n(63),y=n(70),b=n(71),g=n(9),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),k={rect:{style:{brushWidth:b.b.normal,brushColor:b.a.yellow},component:v.b},arrow:{style:{brushWidth:b.b.normal,brushColor:b.a.red},component:v.a},text:{style:{brushWidth:b.b.normal,brushColor:b.a.red,fontSize:b.c.normal,fontFamily:"Microsoft Yahei"},component:v.c}},x={brushWidth:b.b.normal,brushColor:b.a.red,fontSize:b.c.normal,fontFamily:"Microsoft Yahei"},O=null,S=null,T=function(e){function t(){var e,n=this;i(this,t);for(var r=arguments.length,u=Array(r),s=0;s<r;s++)u[s]=arguments[s];var l=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u)));return l.images=[],l.canvases=[],l.history=[],l.tools=l.createTools(),l.handleImageLoaded=function(e){var t=l.state,n=t.widths,r=t.heights,o=t.imageScrollRatio,a=l.images[e],i=a.width,c=a.height;n[e]=i,r[e]=c,l.setState({widths:n,heights:r}),_.every(r,function(e){return!!e})&&setTimeout(function(){l.setState({imageLoading:!1}),l.viewport&&(l.viewport.scrollTop=l.viewport.scrollHeight*o,l.viewport.scrollLeft=(l.viewport.scrollWidth-l.viewport.clientWidth)/2)},1)},l.handleDrawEvent=function(e,t){var n=l.canvases[t];if(n){var r=l.state,o=r.mode,i=r.drawingsList;r.brushWidth,r.brushColor,r.fontFamily,r.fontSize;if(!o)return l.handleGrabEvent(e);var c=i[t]||[],u=n.getBoundingClientRect(),s=u.left,f=u.top,d=e.type,p=Math.round(e.clientX-s)||0,m=Math.round(e.clientY-f)||0,h={type:d,x:p,y:m,e:e},v=l.tools[o].onInput(h,{offsetY:t*g.a}),y=v.commit,b=v.drawing;if(b&&("mousemove"!==d&&"mouseup"!==d||(l.shouldShowDividerWarning(e,t),l.state.activeCanvasIndex===t))){var w=l.decorateDrawing(b);y?(w.commited=!0,i[t]=[].concat(a(c),[w]),l.setState({drawingsList:[].concat(a(i)),activeDrawing:null,activeCanvasIndex:t}),l.history.push(t)):l.setState({activeDrawing:w,activeCanvasIndex:t})}}},l.handleGrabEvent=function(e){var t=e.clientX,n=e.clientY;switch(e.type){case"mousedown":l.lastGrapPosition={lastX:t,lastY:n},l.setState({grabbing:!0});break;case"mousemove":if(l.lastGrapPosition){var r=l.lastGrapPosition,o=r.lastX,a=r.lastY,i=t-o,c=n-a;l.viewport&&(l.viewport.scrollLeft-=i,l.viewport.scrollTop-=c),l.lastGrapPosition={lastX:t,lastY:n}}break;case"mouseup":l.lastGrapPosition=null,l.setState({grabbing:!1})}},l.handleKeydown=function(e){var t=l.state.mode;l.handleDrawEvent(e),e.isDefaultPrevented()||(27==e.keyCode&&(t?l.deactiveTool():l.cancel(),e.stopPropagation()),(e.ctrlKey||e.metaKey)&&90===e.keyCode&&l.undo())},l.undo=function(){var e=l.state.drawingsList,t=l.history.pop(),n=e[t];n&&(n.pop(),l.setState({drawingsList:[].concat(a(e))}))},l.cancel=function(){"function"==typeof l.state.onCancel&&l.state.onCancel(),l.close()},l.close=function(){l.deactiveTool(),l.setState(l.getInitialState())},l.commit=o(regeneratorRuntime.mark(function e(){var t,r,o,a,i,c,u,s,f,d,p,m,v,y,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.deactiveTool();case 2:t=l.state,r=t.drawingsList,o=t.imageSizeLimit,a=function(e,t){"function"==typeof l.state.onFinish&&l.state.onFinish({urls:e,drawingsList:t}),l.close()},i=[],e.prev=5,l.setState({commiting:!0,commitError:null}),c=0,u=l.canvases.length;case 8:if(!(c<u)){e.next=25;break}return s=l.canvases[c],f=s.width,d=s.height,p=document.createElement("canvas"),p.width=f,p.height=d,m=p.getContext("2d"),m.drawImage(l.images[c],0,0),v=r[c]||[],v.length&&l.paintDrawings(m,v),e.next=19,Object(h.g)(p,o);case 19:y=e.sent,b=URL.createObjectURL(y),i.push(b);case 22:c++,e.next=8;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(5),console.error(e.t0),l.setState({commitError:e.t0,commiting:!1});case 31:a(i,r);case 32:case"end":return e.stop()}},e,n,[[5,27]])})),l.shouldShowDividerWarning=function(e,t){if("number"==typeof l.dwTimer&&clearTimeout(l.dwTimer),"mouseup"===e.type)return void l.setState({dwStyle:null});if(l.state.activeCanvasIndex===t){var n=e.clientY,r=l.viewport.scrollTop,o=(r+n-50)%g.a;o<50&&0!==t?l.setState({dwStyle:{top:t*g.a,display:"block",width:$(window).width()},dwPointTop:!0}):o>g.a-50&&t!==l.images.length-1?l.setState({dwStyle:{top:(t+1)*g.a-45,display:"block",width:$(window).width()},dwPointTop:!1}):l.state.dwStyle&&l.setState({dwStyle:null}),l.dwTimer=setTimeout(function(){l.state.dwStyle&&l.setState({dwStyle:null}),l.dwTimer=null},3e3)}},O=l,l.state=l.getInitialState(),l}return u(t,e),E(t,null,[{key:"edit",value:function(e){var n=e.imageUrls,r=e.imageDrawingsList,o=e.imageScrollRatio,a=e.uploadImage,i=e.displayGuide,c=e.onFinish,u=e.onCancel;S||(S=document.createElement("div"),document.body.appendChild(S),p.a.render(f.a.createElement(t,null),S)),O&&O.start({imageUrls:n,imageDrawingsList:r,imageScrollRatio:o,uploadImage:a,displayGuide:i,onFinish:c,onCancel:u})}},{key:"drawToCanvasContext",value:function(e,t){e.translate(.5,.5);var n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value,u=k[c.type],s=u.style;u.component.onRenderCanvas(e,w({},c,s))}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}}}]),E(t,[{key:"getInitialState",value:function(){return w({imageUrls:[],imageLoading:!0,commiting:!1,widths:[],heights:[],mode:null,drawingsList:[],drawImageIndexes:[],activeCanvasIndex:0,activeDrawing:null,toolState:{},displayGuide:!1},x)}},{key:"render",value:function(){var e=this,t=this.state,n=t.imageUrls,r=t.imageLoading,o=t.commiting,a=t.commitError,i=t.widths,c=t.heights,u=t.mode,s=t.grabbing,d=t.displayGuide,p=t.dwStyle,v=t.dwPointTop,b=(u&&this.tools[u].cursor,Object.values(this.tools)),g={opacity:r?0:1,transition:"opacity .3s ease, transform .3s ease",transform:r?"scale3d(0.8, 0.8, 1)":"scale3d(1, 1, 1)"},E=$(window).width(),x=c.reduce(function(e,t){return e+t},0);return f.a.createElement(m.CSSTransitionGroup,w({component:"div"},h.h.fade(),{className:"draft-image-editor"}),n&&n.length&&f.a.createElement("div",{className:"draft-image-edit-zone",ref:function(t){return e.rootElement=t},tabIndex:"1",onKeyDown:this.handleKeydown},f.a.createElement("div",{ref:function(t){return e.viewport=t},className:"viewport",style:{width:E,height:x}},f.a.createElement("div",{className:"paper"},f.a.createElement("div",{className:"img-layer"},n.map(function(t,n){return f.a.createElement(l.Fragment,{key:n},f.a.createElement("img",{key:n,ref:function(t){return e.images[n]=t},onLoad:function(t){return e.handleImageLoaded(n)},src:t,crossOrigin:"anonymous",style:g}))})),f.a.createElement("div",{className:"canvas-layer"},n.map(function(t,n){return f.a.createElement(l.Fragment,{key:n},0!==n&&f.a.createElement("div",{key:"divider-"+n,className:"divider"}),f.a.createElement("canvas",{key:n,ref:function(t){return e.canvases[n]=t},width:i[n],height:c[n],onMouseDown:function(t){return e.handleDrawEvent(t,n)},onMouseUp:function(t){return e.handleDrawEvent(t,n)},onMouseMove:function(t){return e.handleDrawEvent(t,n)},style:g}))})),f.a.createElement("div",{className:"tool-elements"},b.map(function(e){return e.onRenderElement(w({width:E,height:x},k[e.mode].style))}).filter(Boolean))),!d&&p&&f.a.createElement("div",{style:p,className:"dw-bubble"},v&&f.a.createElement("div",{className:"divider"}),v&&f.a.createElement("i",{className:"dw-bubble-dialog top"}),!v&&f.a.createElement("i",{className:"dw-bubble-dialog bottom"}),!v&&f.a.createElement("div",{className:"divider bottom"})),d&&f.a.createElement("div",{className:"screenshot-mask",style:{position:"fixed"},onClick:function(){return e.setState({displayGuide:!1})}},f.a.createElement("div",{className:"screenshot-tip edit-pop"},f.a.createElement("i",{className:"shot-edit-icon"}),f.a.createElement("h3",{className:"shot-edit-text"},"\u201c\u6846\u9009\u622a\u56fe\u5185\u5bb9\u201d"),f.a.createElement("p",{className:"shot-edit-text"},"\u201c\u6846\u9009\u622a\u56fe\u201d\u4e2d\u63cf\u8ff0\u5b58\u5728\u7591\u60d1\u7684\u6587\u6863\u5185\u5bb9\uff0c\u5373\u53ef\u5b8c"),f.a.createElement("p",{className:"shot-edit-text"},"\u6210\u6807\u8bb0\uff0c\u5e2e\u52a9\u6211\u4eec\u5b9a\u4f4d\u95ee\u9898")))),f.a.createElement("br",null),f.a.createElement("div",{className:"tools-container",style:r?{position:"relative",top:"35%"}:null},r?f.a.createElement("div",{className:"load-msg"},"\u8bf7\u7a0d\u5019"):f.a.createElement(y.a,{tools:b,activeMode:u,commiting:o,onToggle:function(t){return e.toggleTool(t.mode)},onUndo:this.undo,onCommit:this.commit,onCancel:this.cancel}),a&&f.a.createElement("div",{className:"error-msg"},"\u4fdd\u5b58\u5931\u8d25"))))}},{key:"componentDidUpdate",value:function(){this.paint()}},{key:"componentWillUnmount",value:function(){var e=this;this.images.forEach(function(t,n){t&&(t.src="",t=null,e.images[n]=null)})}},{key:"start",value:function(e){var t=this,n=e.imageUrls,r=e.imageSizeLimit,o=e.imageDrawingsList,a=e.imageScrollRatio,i=e.uploadImage,c=e.displayGuide,u=e.onFinish,s=e.onCancel,l=e.maxImageSize;n=(n||[]).map(function(e){return 0===e.indexOf("blob")||(e.indexOf("?")>0?e+="&":e+="?",e+="_="+ +new Date),e});var f=(o||[]).map(function(e){return e?e.filter(function(e){return!!k[e.type]}).map(function(e){return w({},e,k[e.type].style,{committed:!0})}):[]}),d=(f[0]||[]).length;if(0===this.history.length&&d>0)for(;d-- >0;)this.history.push(0);!function(){t.setState({imageUrls:n,imageSizeLimit:r,imageScrollRatio:a,drawingsList:f,uploadImage:i,displayGuide:c,onFinish:u,onCancel:s,maxImageSize:l}),t.focus()}()}},{key:"paint",value:function(){for(var e=this.state,t=e.drawingsList,n=e.activeDrawing,r=e.activeCanvasIndex,o=0,a=t.length;o<a;o++){var i=this.canvases[o],c=t[o];if(i&&c){var u=i.getContext("2d");u.clearRect(0,0,i.width,i.height),n&&o===r&&(c=c.concat(w({},n,{commited:!1}))),this.paintDrawings(u,c)}}}},{key:"paintDrawings",value:function(e,t){e.save(),e.translate(.5,.5);var n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;k[c.type].component.onRenderCanvas(e,c)}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}e.restore()}},{key:"createTools",value:function(){var e=this,t={},n=!0,o=!1,a=void 0;try{for(var i,c=Object.keys(k)[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var u=i.value,s=k[u].component;t[u]=new s({store:function(t){var n=function(){return e.state.toolState[t]||{}};return{getState:n,setState:function(o){return e.setState({toolState:w({},e.state.toolState,r({},t,w({},n(),o)))})}}}(u)})}}catch(e){o=!0,a=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw a}}return t}},{key:"toggleTool",value:function(e){this.deactiveTool(),e!=this.state.mode&&this.activeTool(e),this.state.displayGuide&&this.setState({displayGuide:!1})}},{key:"activeTool",value:function(e){this.setState(w({mode:e},k[e].style)),this.tools[e].onActived()}},{key:"deactiveTool",value:function(){var e=this,t=this.state,n=t.mode,r=t.activeCanvasIndex,o=t.drawingsList;if(n){var i=this.tools[n].onDeactived(),c=i.commit,u=i.drawing;if(c&&u){u.commited=!0;var s=o[r]||[];o[r]=[].concat(a(s),[this.decorateDrawing(u)]),this.history.push(r),this.setState({drawingsList:[].concat(a(o))})}}return new Promise(function(t){return e.setState({mode:null},t)})}},{key:"focus",value:function(){var e=this;setTimeout(function(){e.rootElement&&(e.rootElement.focus(),e.paint())},10)}},{key:"decorateDrawing",value:function(e){var t=this.state,n=t.brushWidth,r=t.brushColor,o=t.fontFamily,a=t.fontSize,i=t.activeCanvasIndex;return w({},e,{sourceImage:this.images[i],brushWidth:n,brushColor:r,fontFamily:o,fontSize:a,cache:{}})}}]),t}(f.a.Component)},function(e,t){},function(e,t,n){"use strict";var r=n(64);n.d(t,"a",function(){return r.a});var o=(n(65),n(66),n(67),n(68));n.d(t,"b",function(){return o.a});var a=n(69);n.d(t,"c",function(){return a.a})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return f});var c=n(8),u=n(20),s=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{mode:"arrow",name:"\u7bad\u5934\u5de5\u5177",className:"arrow"}))}return i(t,e),l(t,null,[{key:"onRenderCanvas",value:function(e,t){var n=t.param,o=t.brushColor,a=t.brushWidth,i=s(n,8),c=(i[0],i[1],i[2],i[3],i[4]),l=i[5],f=i[6],d=i[7],p=new u.a(c,f),m=new u.a(l,d),h=u.a.from(p,m),v=m.add(h.rotate(30).reverse().normalize(10)),y=m.add(h.rotate(-30).reverse().normalize(10));e.save(),e.strokeStyle=o,e.lineWidth=a,e.lineCap="round",e.lineJoin="round",e.beginPath(),e.moveTo.apply(e,r(p)),e.lineTo.apply(e,r(m)),e.moveTo.apply(e,r(v)),e.lineTo.apply(e,r(m)),e.lineTo.apply(e,r(y)),e.stroke(),e.restore()}}]),t}(c.a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(8),c=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{mode:"ellipse",name:"\u692d\u5706\u5de5\u5177",className:"round"}))}a(t,e),u(t,null,[{key:"onRenderCanvas",value:function(e,t){var n=t.param,r=t.brushColor,o=t.brushWidth,a=c(n,4),i=a[0],u=a[1],s=a[2],l=a[3];e.save(),e.strokeStyle=r,e.lineWidth=o;var f=s/2*.5522848,d=l/2*.5522848,p=i+s,m=u+l,h=i+s/2,v=u+l/2;e.beginPath(),e.moveTo(i,v),e.bezierCurveTo(i,v-d,h-f,u,h,u),e.bezierCurveTo(h+f,u,p,v-d,p,v),e.bezierCurveTo(p,v+d,h+f,m,h,m),e.bezierCurveTo(h-f,m,i,v+d,i,v),e.closePath(),e.stroke(),e.restore()}}])}(i.a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t,n,r,o){var a=document.createElement("canvas");a.width=r,a.height=o;var i=a.getContext("2d");return i.drawImage(e,-t,-n),i.getImageData(0,0,r,o)}function c(e,t){for(var n=e.width,r=e.height,o=e.data,a=new Uint8ClampedArray(n*r*4),i=function(e,t){return 4*(e+n*t)},c=function(e,t,n){return e.slice(i(t,n),i(t,n)+4)},u=function(e,t,n,r,o,a){var c=i(t,n),u=i(o,a);e[c++]=r[u++],e[c++]=r[u++],e[c++]=r[u++],e[c++]=r[u++]},l=0;l<n;l++)for(var f=0;f<r;f++){var d=l%t,p=f%t;if(!d&&!p){var m=function(e,t,a){for(var i=0,u=0,l=0,f=0,d=0,p=0;p<a&&e+p<n;p++)for(var m=0;m<a&&t+m<r;m++){var h=c(o,e+p,t+m),v=s(h,4),y=v[0],b=v[1],g=v[2],w=v[3];i+=y,u+=b,l+=g,f+=w,d++}return[Math.round(i/d),Math.round(u/d),Math.round(l/d),Math.round(f/d)]}(l,f,t);u(a,l,f,m,0,0)}}for(var h=0;h<n;h++)for(var v=0;v<r;v++){var y=h%t,b=v%t;(y||b)&&u(a,h,v,a,h-y,v-b)}return new ImageData(a,n,r)}var u=n(8),s=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d="object"===("undefined"==typeof window?"undefined":f(window));!function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{mode:"mosaic",name:"\u9a6c\u8d5b\u514b\u5de5\u5177",className:"mosaic",supported:d&&!/msie|trident/.test(navigator.userAgent.toLocaleLowerCase())}))}a(t,e),l(t,null,[{key:"onRenderCanvas",value:function(e,t){var n=t.param,r=t.sourceImage,o=(t.brushColor,t.brushWidth),a=t.cache,u=s(n,4),l=u[0],f=u[1],d=u[2],p=u[3];if(d&&p){if(e.save(),!a.mosaicData){var m=i(r,l,f,d,p);a.mosaicData=c(m,(o+1)*(o+1))}e.putImageData(a.mosaicData,l,f),e.restore()}}}])}(u.a)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){return Array.isArray(e)?e:Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(11),s=(n(20),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),l=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)};!function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{mode:"path",name:"\u8def\u5f84\u5de5\u5177",className:"brush"}))}c(t,e),s(t,[{key:"onActived",value:function(){this.path=null}},{key:"onInput",value:function(e){var t=e.type,n=e.x,r=e.y,o=!1;switch(t){case"mousedown":this.path={type:"path",param:[[n,r]]};break;case"mousemove":this.path&&this.path.param.push([n,r]);break;case"mouseup":o=!0}var a={commit:o,drawing:this.path};return o&&(this.path=null),a}},{key:"onDeactived",value:function(){return this.path=null,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onDeactived",this).call(this)}}],[{key:"onRenderCanvas",value:function(e,t){var n=t.param,a=t.brushColor,i=t.brushWidth,c=o(n),u=c[0],s=c.slice(1);e.save(),e.strokeStyle=a,e.lineWidth=i,e.beginPath(),e.moveTo.apply(e,r(u));var l=!0,f=!1,d=void 0;try{for(var p,m=s[Symbol.iterator]();!(l=(p=m.next()).done);l=!0){var h=p.value;e.lineTo.apply(e,r(h))}}catch(e){f=!0,d=e}finally{try{!l&&m.return&&m.return()}finally{if(f)throw d}}e.stroke(),e.restore()}}])}(u.a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return s});var i=n(8),c=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{mode:"rect",name:"\u77e9\u5f62\u5de5\u5177",className:"rect"}))}return a(t,e),u(t,null,[{key:"onRenderCanvas",value:function(e,t){var n=t.param,r=t.brushColor,o=t.brushWidth,a=c(n,4),i=a[0],u=a[1],s=a[2],l=a[3];e.save(),e.strokeStyle=r,e.lineWidth=o,e.strokeStyle=r,e.strokeRect(i,u,s,l),e.fillStyle=r,e.globalAlpha=.3,e.fillRect(i,u,s,l),e.restore()}}]),t}(i.a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return p});var i,c,u=n(0),s=n.n(u),l=n(11),f=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=(c=i=function(e){function t(e){var n=e.store;return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{mode:"text",name:"\u6587\u672c\u5de5\u5177",className:"text",cursor:"text",store:n}))}return a(t,e),d(t,[{key:"onActived",value:function(){this.store.setState({text:null})}},{key:"onInput",value:function(e,t){var n=e.type,r=e.x,o=e.y,a=e.e,i=t.offsetY,c=this.store,u=c.getState,s=c.setState;if("mousedown"==n){var l=this.commit();return s({placed:!0,x:r,y:o,text:null,dragging:!0,offsetY:i}),this.focus(),this.clear(),{commit:!!l,drawing:l}}if("mousemove"==n){return u().dragging&&s({x:r,y:o}),{commit:!1,drawing:null}}if("mouseup"==n)return s({dragging:!1}),{commit:!1,drawing:null};if("keydown"==n&&13==a.keyCode){s({placed:!1}),a.preventDefault();var f=this.commit();return{commit:!!f,drawing:f}}return{commit:!1,drawing:null}}},{key:"onDeactived",value:function(){var e=this.commit();return this.store.setState({actived:!1,placed:!1}),{commit:!!e,drawing:e}}},{key:"commit",value:function(){var e=this.store,t=e.getState,n=(e.setState,t()),r=n.x,o=n.y,a=n.text;return a&&/\S/.test(a)?{type:this.mode,param:[r,o,a]}:null}},{key:"onRenderElement",value:function(e){var n=this,r=this.store,o=r.getState,a=r.setState,i=e.brushColor,c=e.width,u=e.fontFamily,l=e.fontSize,f=o(),d=f.x,p=f.y,m=f.offsetY,h=void 0===m?0:m,v=f.dragging;if(!f.placed)return null;var y=function(e){return a({text:e.target.textContent})},b=t.getTransX(d,c),g={position:"absolute",left:0,top:0,transform:"translate3d("+b+"px, "+(p+h-l/2)+"px, 0)",border:"1px dashed black",padding:"0 5px",fontFamily:u,fontSize:l+"px",color:i,minHeight:1.5*l,textAlign:"left",pointerEvents:v?"none":"all",maxWidth:Math.max(50,c-d-5),minWidth:50};return s.a.createElement("div",{key:this.mode,ref:function(e){return n.inputElement=e},className:"image-overlay-text-input",contentEditable:!0,onKeyUp:y,onInput:y,style:g})}},{key:"focus",value:function(){var e=this;setTimeout(function(){e.inputElement&&e.inputElement.focus()},10)}},{key:"clear",value:function(){this.inputElement&&(this.inputElement.textContent="")}}],[{key:"onRenderCanvas",value:function(e,n){var r=n.commited,o=(n.type,n.param),a=n.brushColor,i=n.fontFamily,c=n.fontSize;if(r){var u=f(o,3),s=u[0],l=u[1],d=u[2],p=e.canvas.width,m=t.getTransX(s,p)+6,h=Math.max(50,p-s-5),v=Math.max(Math.floor(h/c),1);e.save(),e.fillStyle=a,e.textBaseline="top",e.font=c+"px '"+i+"'";for(var y=0,b=0;y<d.length;b++){for(var g=[],w=v;w>=1&&y<d.length;){var E=d[y++];g.push(E),/[^\u0000-\u00FF]/gim.test(E)?w--:w-=.5}e.fillText(g.join(""),m,l-c/2+4+b*(c+4))}e.restore()}}}]),t}(l.a),i.getTransX=function(e,t){var n=window.innerWidth-document.body.clientWidth;return t-e<50?t-50-n:e},c)},function(e,t,n){"use strict";function r(e){var t=e.tools,n=e.activeMode,r=e.commiting,a=e.onToggle,c=e.onUndo,d=e.onCommit,p=e.onCancel;return i.a.createElement("div",{className:"toolbar"},t.map(function(e){return i.a.createElement(o,{key:e.mode,tool:e,activeMode:n,disabled:!e.supported,onToggle:function(){return a(e)}})}),i.a.createElement("span",{className:"split"}),i.a.createElement("button",{className:u()(f,"revocation"),onClick:c},"\u64a4\u9500"),i.a.createElement("button",{className:u()(f,"cancle"),onClick:p},"\u53d6\u6d88"),i.a.createElement("button",{className:u()(f,"sure"),onClick:d},"\u786e\u5b9a"),i.a.createElement(s.CSSTransitionGroup,l.h.slide(),r&&i.a.createElement("div",{className:"toolbox-msg"},"\u6b63\u5728\u4fdd\u5b58...")))}function o(e){var t=e.tool,n=e.activeMode,r=e.onToggle,o=e.disabled,a=t.mode,c=t.name,s=t.className;return i.a.createElement("button",{className:u()(f,s||a,{actived:a==n,disabled:o}),style:{pointerEvents:o?"none":"all",opacity:o?.3:1,cursor:o?"not-allowed":""},onClick:o?null:r},c)}n.d(t,"a",function(){return r});var a=n(0),i=n.n(a),c=n(2),u=n.n(c),s=n(6),l=(n.n(s),n(1)),f="image-edit-btn"},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return u});var r=n(0),o=(n.n(r),n(6)),a=(n.n(o),n(2)),i=(n.n(a),n(1),Object.assign,{small:1,normal:3,large:7}),c={small:14,normal:24,large:36},u={red:"#ff411d",yellow:"#ffe729",green:"#76d623",blue:"#2a9bff",gray:"#676767",white:"#ffffff"}},function(e,t,n){"use strict";n(21)},function(e,t){e.exports=window.jQuery},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return N});var s=n(0),l=n.n(s),f=n(4),d=n.n(f),p=n(2),m=n.n(p),h=n(5),v=n(21),y=n(9),b=n(1),g=n(22),w=n.n(g),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),x=h.d.Body,O=h.d.Footer,S=h.d.Button,T=function(e){var t=e.children;return l.a.createElement("ul",{className:"c-f-list"},t)},C=function(e){var t=e.label,n=(e.className,e.children),r=e.style;return l.a.createElement("li",{className:m()("f-list-item",m.a)},l.a.createElement("label",{className:"c-f-list-tit",style:r},l.a.createElement("span",null,t)),l.a.createElement("div",{className:"c-f-list-con"},n))},_=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,j=200,N=function(e){function t(){var e,n,r,u,s=this;i(this,t);for(var f=arguments.length,d=Array(f),p=0;p<f;p++)d[p]=arguments[p];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(d))),r.timer=null,r.state={logined:!1,screenInfo:null,isScreenshotDirty:!1,formData:{suggest:"",tag:[],mail:""},formError:{},hasAttachments:!0,saving:!1,checkSaving:!1},r.validate=function(){var e=r.state,t=e.formData,n=e.formError;return t.suggest.trim()?t.suggest.length>j&&(n.suggest="\u4e0d\u80fd\u8d85\u8fc7"+j+"\u4e2a\u5b57"):n.suggest="\u53cd\u9988\u610f\u89c1\u4e0d\u80fd\u4e3a\u7a7a",t.mail.trim()&&!_.test(t.mail.trim())&&(n.mail="\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u5730\u5740"),r.setState({formError:n}),!n.suggest&&!n.mail},r.handleSubmit=a(regeneratorRuntime.mark(function e(){var t,n,a,i,c,u,f,d,p,m,v,g,w,k,x,O,S,T,C=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.validate()){e.next=2;break}return e.abrupt("return",!1);case 2:if(t=C?"saving":"checkSaving",r.setState(o({},t,!0)),n=r.state,a=n.isScreenshotDirty,i=n.hasAttachments,c=n.formData,u=E({},c),f=[],!(i&&a&&u.attachments&&u.attachments.length)){e.next=44;break}d=!0,p=!1,m=void 0,e.prev=11,v=u.attachments[Symbol.iterator]();case 13:if(d=(g=v.next()).done){e.next=30;break}return w=g.value,e.next=17,Object(y.c)(w);case 17:return k=e.sent,e.next=20,Object(b.b)(k,2097152);case 20:return x=e.sent,O=x.blob,e.next=24,r.uploadScreenshot(O);case 24:S=e.sent,T=S.url,f.push(T);case 27:d=!0,e.next=13;break;case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(11),p=!0,m=e.t0;case 36:e.prev=36,e.prev=37,!d&&v.return&&v.return();case 39:if(e.prev=39,!p){e.next=42;break}throw m;case 42:return e.finish(39);case 43:return e.finish(36);case 44:delete u.attachments,u.attachment=f.length?f.join(","):null,r.setState(o({},t,!1)),r.props.onSubmit(u),h.d.hide(),setTimeout(function(){h.d.confirm({success:!0,title:"\u53cd\u9988\u6210\u529f",content:l.a.createElement("div",{className:"d-conform-dialog-txt"},"\u975e\u5e38\u611f\u8c22\u60a8\u7684\u53cd\u9988\uff0c\u6211\u4eec\u4f1a\u7ee7\u7eed\u52aa\u529b\u505a\u5f97\u66f4\u597d\u3002"),showCancel:!1,onConfirm:function(){return h.d.hide()}})},200);case 50:case"end":return e.stop()}},e,s,[[11,32,36,44],[37,,39,43]])})),r.handleLoginSubmit=function(){if(!r.validate())return!1;var e="/login?s_url="+encodeURIComponent("https://cloud.tencent.com/services/empty-close"),t=void 0!=window.screenLeft?window.screenLeft:window.screenX,n=void 0!=window.screenTop?window.screenTop:window.screenY,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,i=(o-520)/2+t,c=(a-570)/2+n,u=window.open(e,"_blank","scrollbars=yes, scrollbars=yes, status=yes, width=520, height=570, top="+c+", left="+i);u&&u.focus&&u.focus(),r.refreshTimer()},r.refreshTimer=function(){r.timer&&clearInterval(r.timer),r.timer=setInterval(function(){r.checkIsLogined()&&(clearInterval(r.timer),r.timer=null,r.handleSubmit(!0))},1e3)},r.checkIsLogined=function(){var e=!(!w.a.get("uin")||!w.a.get("skey")&&!w.a.get("p_skey"));return r.setState({logined:e}),e},u=n,c(r,u)}return u(t,e),k(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.screenInfo,o=t.logined,a=t.hasAttachments,i=t.formData,c=t.formError,u=t.saving,s=t.checkSaving,f=this.props,d=f.screenshot,p=f.selection,m=(f.onSubmit,r(f,["screenshot","selection","onSubmit"])),y=d||{},b=y.on,g=y.layers,w=y.fullPage,k=y.drawingsList,N=p||{},P=N.on,F=N.selectionText,D=void 0===F?"":F,R=b&&this.isScreenshotSupport();return!n&&R?null:l.a.createElement(h.d,E({className:"c-dialog-screen-large d-feedback-dialog",caption:"\u60a8\u7684\u6539\u8fdb\u5efa\u8bae",onClose:function(){return h.d.hide()},maskClosable:!1},m),l.a.createElement(x,null,l.a.createElement("div",{className:"tc-15-msg"},l.a.createElement("div",{className:"tip-info"},l.a.createElement("i",{className:"feedback-tips-icon"}),o?"":"\u767b\u5f55\u5e76","\u53cd\u9988\u6709\u6548\u95ee\u9898\uff0c\u53ef\u5feb\u901f\u83b7\u5f97\u652f\u6301\uff0c\u66f4\u6709",l.a.createElement("a",{hotrep:"document.feedback.gift",target:"_blank",href:"https://cloud.tencent.com/developer/article/1523112"}," \u4ee3\u91d1\u5238 ")," \u62ff")),l.a.createElement(T,null,l.a.createElement(C,{label:"\u95ee\u9898\u7c7b\u578b"},l.a.createElement(h.c,{value:i.tag||[],options:[{label:"\u5185\u5bb9\u627e\u4e0d\u5230",value:1,hotrep:"document.feedback.tag.1"},{label:"\u5185\u5bb9\u6ca1\u66f4\u65b0",value:2,hotrep:"document.feedback.tag.2"},{label:"\u63cf\u8ff0\u4e0d\u6e05\u695a",value:3,hotrep:"document.feedback.tag.2"},{label:"\u94fe\u63a5\u6709\u9519\u8bef",value:4,hotrep:"document.feedback.tag.4"},{label:"\u6b65\u9aa4\u4e0d\u5b8c\u6574",value:5,hotrep:"document.feedback.tag.5"},{label:"\u4ee3\u7801/\u56fe\u7247\u7f3a\u5931",value:6,hotrep:"document.feedback.tag.6"}],onChange:function(t){return e.setFieldValue({tag:t})}})),l.a.createElement(C,{label:"\u610f\u89c1\u53cd\u9988",className:"text-area-item"},l.a.createElement("textarea",{ref:function(t){return e.$input=t},className:"c-textarea",cols:"30",rows:"10",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u5efa\u8bae\u6216\u95ee\u9898",onChange:function(t){var n=t.target.value;e.setFieldValue({suggest:n}),e.setState({formError:E({},e.state.formError,{suggest:n.length>j&&"\u4e0d\u80fd\u8d85\u8fc7"+j+"\u4e2a\u5b57"})})}}),c.suggest?l.a.createElement("p",{className:"c-f-tip-word error"},c.suggest):null),R&&l.a.createElement(C,{label:"\u6807\u8bb0\u5185\u5bb9"},l.a.createElement(h.b,{checked:a,onChange:function(t){return e.setState({hasAttachments:t})},hotrep:"document.feedback.btn.attachments"},"\u9644\u4e0a\u6587\u7ae0\u5185\u5bb9\u622a\u56fe\uff0c\u6807\u8bb0\u5177\u4f53\u5185\u5bb9\u5e2e\u52a9\u6211\u4eec\u5b8c\u5584\u6587\u6863"),l.a.createElement(v.a,{style:{display:a?"":"none",height:100},ref:function(t){return e.screenshot=t},info:n,fullPage:w,drawingsList:k,layers:g,autoCapture:!1,onChange:function(t,n){var r=n.dirty;e.setFieldValue({attachments:t}),e.setState({isScreenshotDirty:r})}})),P&&l.a.createElement(C,{label:"\u5df2\u6807\u8bb0\u5185\u5bb9"},l.a.createElement("textarea",{className:"c-textarea",cols:"30",rows:"10",disabled:!0,value:D})),!o&&l.a.createElement(C,{label:"\u8054\u7cfb\u90ae\u7bb1",style:{paddingTop:13}},l.a.createElement("input",{className:"c-input-text",placeholder:"\u9009\u586b\u90ae\u7bb1\u6216\u767b\u5f55\u8d26\u53f7\uff0c\u4fbf\u4e8e\u6211\u4eec\u8054\u7cfb\u60a8\u3002",onChange:function(t){var n=t.target.value;e.setFieldValue({mail:n.trim()})},onBlur:function(t){var n=t.target.value.trim();e.setState({formError:E({},e.state.formError,{mail:!(!n||_.test(n))&&"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u5730\u5740"})})}}),c.mail?l.a.createElement("p",{className:"c-f-tip-word error"},c.mail):null))),l.a.createElement(O,null,o?l.a.createElement(S,{key:"primary-submit",primary:!0,submit:!0,loading:u,onClick:this.handleSubmit,hotrep:"document.feedback.dialog.login-submit"},"\u5b8c\u6210\u5e76\u63d0\u4ea4"):[l.a.createElement(S,{key:"login-submit",primary:!0,submit:!0,loading:s,onClick:this.handleLoginSubmit,hotrep:"document.feedback.dialog.login-submit"},"\u767b\u5f55\u5e76\u63d0\u4ea4"),l.a.createElement(S,{key:"direct-submit",cancel:!0,loading:u,onClick:this.handleSubmit,hotrep:"document.feedback.dialog.direct-submit"},"\u76f4\u63a5\u63d0\u4ea4")]))}},{key:"componentDidMount",value:function(){var e=this,t=Object(y.d)();this.setState({screenInfo:t}),this.checkIsLogined(),setTimeout(function(){try{var t=d.a.findDOMNode(e.$input);t&&t.focus()}catch(e){}e.screenshot&&e.screenshot.capture()})}},{key:"setFieldValue",value:function(e){this.setState({formData:E({},this.state.formData,e)})}},{key:"uploadScreenshot",value:function(e){return Object(b.i)("//cloud.tencent.com/tool/screenshot?action=upload",e,"screenshot.jpg")}},{key:"isScreenshotSupport",value:function(){return!/msie/.test(navigator.userAgent.toLowerCase())}},{key:"componentWillUnmount",value:function(){this.timer&&clearInterval(this.timer)}}]),t}(s.Component)},function(e,t,n){"use strict";var r=n(76);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.type,n=e.actived,r=e.onClick,o="up"===t?"\u6709\u5e2e\u52a9":"\u6ca1\u5e2e\u52a9";return s.a.createElement("div",{className:f()("doc-feedback-btn-item",{actived:n})},s.a.createElement("a",{href:"javascript:;",className:"doc-feedback-btn-"+t,onClick:r,hotrep:"document.feedback.vote."+t},s.a.createElement("i",{className:"icon-feedback-"+t}),s.a.createElement("span",{className:f()("feedback-count","feedback-"+t+"-count")},o)))}function c(){return s.a.createElement("div",{className:"doc-feedback-status J-docFeedbackResult"},s.a.createElement("i",{className:"icon-doc-feedback-status"}),s.a.createElement("span",null,"\u63d0\u4ea4\u6210\u529f\uff01\u975e\u5e38\u611f\u8c22\u60a8\u7684\u53cd\u9988\uff0c\u6211\u4eec\u4f1a\u7ee7\u7eed\u52aa\u529b\u505a\u5230\u66f4\u597d\uff01"))}n.d(t,"a",function(){return w});var u=n(0),s=n.n(u),l=n(2),f=n.n(l),d=n(5),p=n(1),m=n(23),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=1,b=2,g=200,w=function(e){function t(){var e,n,a,i;r(this,t);for(var c=arguments.length,u=Array(c),s=0;s<c;s++)u[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.state={useful:0,showForm:!1,showResult:!1,showDialog:!1},a.handleVoteDown=function(e){var t=a.props.onSubmitUseful,n=Object(p.f)();e===y?a.setState({useful:y,showResult:!0}):a.setState({useful:b,showForm:!!n,showDialog:!n}),t({useful:e})},a.handleSubmit=function(){a.setState({showForm:!1,showDialog:!1,showResult:!0})},i=n,o(a,i)}return a(t,e),v(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.useful,r=t.showForm,o=t.showDialog,a=t.showResult,l=this.props.onSubmitSuggest;return s.a.createElement(u.Fragment,null,s.a.createElement("div",{className:"doc-feedback concise"},s.a.createElement("div",{className:"doc-feedback-tips"},"\u6587\u6863\u662f\u5426\u6709\u5e2e\u52a9\u89e3\u51b3\u95ee\u9898\uff1f"),!a&&s.a.createElement(u.Fragment,null,s.a.createElement("div",{className:"J-docFeedbackSource"},s.a.createElement("div",{className:"doc-feedback-btn"},s.a.createElement(i,{type:"up",actived:n===y,onClick:function(){return e.handleVoteDown(y)}}),s.a.createElement(i,{type:"down",actived:n===b,onClick:function(){return e.handleVoteDown(b)}})),o&&s.a.createElement(m.a,{screenshot:{on:!0,fullPage:!0},onSubmit:function(t){l(t),e.handleSubmit()},onClose:function(){return e.setState({showDialog:!1,useful:0})}}),r&&s.a.createElement(E,{onSubmit:function(t){l(t),e.handleSubmit()},onCancel:function(){return e.setState({showForm:!1,useful:0})}}))),a&&s.a.createElement(c,null)),s.a.createElement("p",{className:"more-help"},"\u5982\u679c\u9047\u5230\u4ea7\u54c1\u76f8\u5173\u95ee\u9898\uff0c\u60a8\u53ef ",s.a.createElement("a",{target:"_blank",hotrep:"document.feedback.result.goto-workorder",href:"https://console.cloud.tencent.com/workorder/category"},"\u63d0\u4ea4\u5de5\u5355")," \u5bfb\u6c42\u5e2e\u52a9\u3002"))}}]),t}(u.Component),E=function(e){function t(){var e,n,a,i;r(this,t);for(var c=arguments.length,u=Array(c),s=0;s<c;s++)u[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.state={formData:{suggest:"",tag:[]},formError:{}},a.validate=function(){var e=a.state.formData,t={};return e.suggest.trim()?e.suggest.length>g&&(t.suggest="\u4e0d\u80fd\u8d85\u8fc7"+g+"\u4e2a\u5b57"):t.suggest="\u53cd\u9988\u610f\u89c1\u4e0d\u80fd\u4e3a\u7a7a",a.setState({formError:t}),_.isEmpty(t)},a.handleSubmit=function(){var e=a.props.onSubmit,t=a.state.formData;if(!a.validate())return!1;e&&e(h({},t))},i=n,o(a,i)}return a(t,e),v(t,[{key:"render",value:function(){var e=this,t=this.props.onCancel,n=this.state,r=n.formData,o=n.formError;return s.a.createElement("div",{className:"doc-feedback-bubble c-bubble c-bubble-top"},s.a.createElement("div",{className:"c-bubble-inner"},s.a.createElement("div",{className:"doc-feedback-con"},s.a.createElement("div",{className:"doc-feedback-tips"},"\u6211\u4eec\u5982\u4f55\u624d\u80fd\u4f7f\u6587\u6863\u53d8\u5f97\u66f4\u597d\uff1f"),s.a.createElement("div",{className:"doc-feedback-form"},s.a.createElement("div",{className:"doc-feedback-form-item J-docFeedbackTextContainer"},s.a.createElement("textarea",{className:"doc-feedback-textarea",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u5efa\u8bae\u6216\u95ee\u9898",onChange:function(t){var n=t.target.value;e.setFieldValue({suggest:n}),e.setState({formError:h({},e.state.formError,{suggest:n.length>g&&"\u4e0d\u80fd\u8d85\u8fc7"+g+"\u4e2a\u5b57"})})}}),o.suggest&&s.a.createElement("div",{className:"doc-feedback-textarea-tips J-docFeedbackTip"},o.suggest),s.a.createElement("div",{className:"doc-feedback-tags"},s.a.createElement("span",{className:"feedback-tags-label"},"\u95ee\u9898\u7c7b\u578b\uff1a"),s.a.createElement(d.c,{value:r.tag||[],options:[{label:"\u5185\u5bb9\u627e\u4e0d\u5230",value:1,hotrep:"document.feedback.tag.1"},{label:"\u5185\u5bb9\u6ca1\u66f4\u65b0",value:2,hotrep:"document.feedback.tag.2"},{label:"\u63cf\u8ff0\u4e0d\u6e05\u695a",value:3,hotrep:"document.feedback.tag.2"},{label:"\u94fe\u63a5\u6709\u9519\u8bef",value:4,hotrep:"document.feedback.tag.4"},{label:"\u6b65\u9aa4\u4e0d\u5b8c\u6574",value:5,hotrep:"document.feedback.tag.5"},{label:"\u4ee3\u7801/\u56fe\u7247\u7f3a\u5931",value:6,hotrep:"document.feedback.tag.6"}],onChange:function(t){return e.setFieldValue({tag:t})}})))),s.a.createElement("div",{className:"doc-feedback-form-btn"},s.a.createElement(d.a,{type:"primary",small:!0,onClick:this.handleSubmit,hotrep:"document.feedback.bottom.submit"},"\u63d0\u4ea4\u53cd\u9988"),s.a.createElement(d.a,{weak:!0,small:!0,onClick:t,hotrep:"document.feedback.bottom.cancel"},"\u53d6\u6d88")))))}},{key:"setFieldValue",value:function(e){this.setState({formData:h({},this.state.formData,e)})}}]),t}(u.Component)}]);